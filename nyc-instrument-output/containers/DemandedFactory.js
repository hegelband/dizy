function cov_60my8k259(){var path="D:\\Programming\\xyz\\dizy\\src\\containers\\DemandedFactory.js";var hash="f86fb6dd9731c32c1c1bc484703987375b1919f0";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"D:\\Programming\\xyz\\dizy\\src\\containers\\DemandedFactory.js",statementMap:{"0":{start:{line:14,column:2},end:{line:17,column:4}},"1":{start:{line:23,column:2},end:{line:26,column:4}},"2":{start:{line:40,column:2},end:{line:42,column:3}},"3":{start:{line:41,column:3},end:{line:41,column:44}},"4":{start:{line:43,column:2},end:{line:45,column:3}},"5":{start:{line:43,column:96},end:{line:43,column:132}},"6":{start:{line:44,column:3},end:{line:44,column:51}},"7":{start:{line:46,column:36},end:{line:46,column:117}},"8":{start:{line:46,column:64},end:{line:46,column:116}},"9":{start:{line:47,column:2},end:{line:49,column:3}},"10":{start:{line:48,column:3},end:{line:48,column:90}},"11":{start:{line:50,column:2},end:{line:50,column:37}},"12":{start:{line:51,column:2},end:{line:51,column:24}},"13":{start:{line:57,column:25},end:{line:57,column:27}},"14":{start:{line:58,column:2},end:{line:70,column:3}},"15":{start:{line:59,column:3},end:{line:69,column:6}},"16":{start:{line:60,column:21},end:{line:60,column:100}},"17":{start:{line:60,column:70},end:{line:60,column:99}},"18":{start:{line:62,column:5},end:{line:64,column:17}},"19":{start:{line:65,column:4},end:{line:67,column:5}},"20":{start:{line:66,column:5},end:{line:66,column:49}},"21":{start:{line:68,column:4},end:{line:68,column:68}},"22":{start:{line:71,column:2},end:{line:71,column:46}},"23":{start:{line:72,column:19},end:{line:72,column:84}},"24":{start:{line:73,column:2},end:{line:73,column:60}},"25":{start:{line:74,column:2},end:{line:74,column:18}},"26":{start:{line:82,column:2},end:{line:84,column:3}},"27":{start:{line:83,column:3},end:{line:83,column:82}},"28":{start:{line:85,column:2},end:{line:85,column:45}},"29":{start:{line:96,column:16},end:{line:96,column:82}},"30":{start:{line:96,column:49},end:{line:96,column:81}},"31":{start:{line:97,column:2},end:{line:99,column:3}},"32":{start:{line:98,column:3},end:{line:98,column:20}},"33":{start:{line:100,column:2},end:{line:100,column:36}},"34":{start:{line:108,column:2},end:{line:108,column:22}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:13,column:1},end:{line:13,column:2}},loc:{start:{line:13,column:15},end:{line:18,column:2}},line:13},"1":{name:"(anonymous_1)",decl:{start:{line:22,column:1},end:{line:22,column:2}},loc:{start:{line:22,column:15},end:{line:27,column:2}},line:22},"2":{name:"(anonymous_2)",decl:{start:{line:39,column:1},end:{line:39,column:2}},loc:{start:{line:39,column:41},end:{line:52,column:2}},line:39},"3":{name:"(anonymous_3)",decl:{start:{line:43,column:83},end:{line:43,column:84}},loc:{start:{line:43,column:96},end:{line:43,column:132}},line:43},"4":{name:"(anonymous_4)",decl:{start:{line:46,column:55},end:{line:46,column:56}},loc:{start:{line:46,column:64},end:{line:46,column:116}},line:46},"5":{name:"(anonymous_5)",decl:{start:{line:59,column:47},end:{line:59,column:48}},loc:{start:{line:59,column:56},end:{line:69,column:4}},line:59},"6":{name:"(anonymous_6)",decl:{start:{line:60,column:57},end:{line:60,column:58}},loc:{start:{line:60,column:70},end:{line:60,column:99}},line:60},"7":{name:"(anonymous_7)",decl:{start:{line:81,column:1},end:{line:81,column:2}},loc:{start:{line:81,column:32},end:{line:86,column:2}},line:81},"8":{name:"(anonymous_8)",decl:{start:{line:93,column:1},end:{line:93,column:2}},loc:{start:{line:93,column:21},end:{line:101,column:2}},line:93},"9":{name:"(anonymous_9)",decl:{start:{line:96,column:40},end:{line:96,column:41}},loc:{start:{line:96,column:49},end:{line:96,column:81}},line:96},"10":{name:"(anonymous_10)",decl:{start:{line:107,column:1},end:{line:107,column:2}},loc:{start:{line:107,column:13},end:{line:109,column:2}},line:107}},branchMap:{"0":{loc:{start:{line:39,column:21},end:{line:39,column:39}},type:"default-arg",locations:[{start:{line:39,column:37},end:{line:39,column:39}}],line:39},"1":{loc:{start:{line:40,column:2},end:{line:42,column:3}},type:"if",locations:[{start:{line:40,column:2},end:{line:42,column:3}},{start:{line:undefined,column:undefined},end:{line:undefined,column:undefined}}],line:40},"2":{loc:{start:{line:43,column:2},end:{line:45,column:3}},type:"if",locations:[{start:{line:43,column:2},end:{line:45,column:3}},{start:{line:undefined,column:undefined},end:{line:undefined,column:undefined}}],line:43},"3":{loc:{start:{line:43,column:6},end:{line:43,column:134}},type:"binary-expr",locations:[{start:{line:43,column:6},end:{line:43,column:35}},{start:{line:43,column:40},end:{line:43,column:60}},{start:{line:43,column:64},end:{line:43,column:133}}],line:43},"4":{loc:{start:{line:47,column:2},end:{line:49,column:3}},type:"if",locations:[{start:{line:47,column:2},end:{line:49,column:3}},{start:{line:undefined,column:undefined},end:{line:undefined,column:undefined}}],line:47},"5":{loc:{start:{line:58,column:2},end:{line:70,column:3}},type:"if",locations:[{start:{line:58,column:2},end:{line:70,column:3}},{start:{line:undefined,column:undefined},end:{line:undefined,column:undefined}}],line:58},"6":{loc:{start:{line:62,column:5},end:{line:64,column:17}},type:"cond-expr",locations:[{start:{line:63,column:8},end:{line:63,column:98}},{start:{line:64,column:8},end:{line:64,column:17}}],line:62},"7":{loc:{start:{line:65,column:4},end:{line:67,column:5}},type:"if",locations:[{start:{line:65,column:4},end:{line:67,column:5}},{start:{line:undefined,column:undefined},end:{line:undefined,column:undefined}}],line:65},"8":{loc:{start:{line:82,column:2},end:{line:84,column:3}},type:"if",locations:[{start:{line:82,column:2},end:{line:84,column:3}},{start:{line:undefined,column:undefined},end:{line:undefined,column:undefined}}],line:82},"9":{loc:{start:{line:97,column:2},end:{line:99,column:3}},type:"if",locations:[{start:{line:97,column:2},end:{line:99,column:3}},{start:{line:undefined,column:undefined},end:{line:undefined,column:undefined}}],line:97}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0},f:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0},b:{"0":[0],"1":[0,0],"2":[0,0],"3":[0,0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"f86fb6dd9731c32c1c1bc484703987375b1919f0"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_60my8k259=function(){return actualCoverage;};}return actualCoverage;}cov_60my8k259();import LifecycleEnum from"../constants/LifecycleEnum.js";import ContainerHasClassWithInvalidLifecycle from"../errors/ContainerHasClassWithInvalidLifecycle.js";// eslint-disable-next-line no-unused-vars
import FunctionWrapper from"../wrappers/FunctionWrapper.js";// import deepEqual from "../utils/deepEqual.js";
import AbstractContextContainer from"./AbstractContextContainer.js";import DependencyTree from"./helpers/DependencyTree.js";// eslint-disable-next-line no-unused-vars
import DIObjectKey from"./helpers/DIObjectKey.js";import InstanceHelper from"./helpers/InstanceHelper.js";class InvalidDemandedFactoryParent extends Error{constructor(){cov_60my8k259().f[0]++;cov_60my8k259().s[0]++;super("Invalid demanded factory parent. "+"Parent must be an instance of AbstractContextContainer or it's derived class, null or undefined.");}}class DemandedFactoryClassTreeListInvalid extends Error{constructor(){cov_60my8k259().f[1]++;cov_60my8k259().s[1]++;super("DemandedFactory constructor's argument 'classTreeList' is invalid. "+"Argument 'classTreeList' must be an array of DependencyTree instances");}}/** Class representing a DI objects factory for objects with demanded lifecycle
 * @class
 */class DemandedFactory{/**
	 *
	 * @param {AbstractContextContainer} parent - parent container
	 * @param {DependencyTree[]} [classTreeList=[]] - list of di objects dependency tree
	 */constructor(parent,classTreeList=(cov_60my8k259().b[0][0]++,[])){cov_60my8k259().f[2]++;cov_60my8k259().s[2]++;if(!(parent instanceof AbstractContextContainer)){cov_60my8k259().b[1][0]++;cov_60my8k259().s[3]++;throw new InvalidDemandedFactoryParent();}else{cov_60my8k259().b[1][1]++;}cov_60my8k259().s[4]++;if((cov_60my8k259().b[3][0]++,!Array.isArray(classTreeList))||(cov_60my8k259().b[3][1]++,classTreeList.length)&&(cov_60my8k259().b[3][2]++,classTreeList.find(clsTree=>{cov_60my8k259().f[3]++;cov_60my8k259().s[5]++;return!(clsTree instanceof DependencyTree);}))){cov_60my8k259().b[2][0]++;cov_60my8k259().s[6]++;throw new DemandedFactoryClassTreeListInvalid();}else{cov_60my8k259().b[2][1]++;}const classWithInvalidLifecycle=(cov_60my8k259().s[7]++,classTreeList.find(cls=>{cov_60my8k259().f[4]++;cov_60my8k259().s[8]++;return cls.baseNode.lifecycle.id!==LifecycleEnum.Demanded;}));cov_60my8k259().s[9]++;if(classWithInvalidLifecycle){cov_60my8k259().b[4][0]++;cov_60my8k259().s[10]++;throw new ContainerHasClassWithInvalidLifecycle("Demanded",classWithInvalidLifecycle);}else{cov_60my8k259().b[4][1]++;}cov_60my8k259().s[11]++;this.classTreeList=classTreeList;cov_60my8k259().s[12]++;this.#parent=parent;}#parent;#buildInstance(clazzTree){const argumentValues=(cov_60my8k259().s[13]++,[]);cov_60my8k259().s[14]++;if(clazzTree.baseNode.constructor.args.length>0){cov_60my8k259().b[5][0]++;cov_60my8k259().s[15]++;clazzTree.baseNode.constructor.args.forEach(arg=>{cov_60my8k259().f[5]++;const argClazz=(cov_60my8k259().s[16]++,this.getParent().classTreeList.find(clsTree=>{cov_60my8k259().f[6]++;cov_60my8k259().s[17]++;return clsTree.baseNode.name===arg;}));const existedInstance=(cov_60my8k259().s[18]++,argClazz.baseNode.lifecycle.id!==LifecycleEnum.Demanded?(cov_60my8k259().b[6][0]++,this.getParent().getInstance(argClazz.baseNode.name,argClazz.baseNode.lifecycle.id,true)):(cov_60my8k259().b[6][1]++,undefined));cov_60my8k259().s[19]++;if(existedInstance){cov_60my8k259().b[7][0]++;cov_60my8k259().s[20]++;return argumentValues.push(existedInstance);}else{cov_60my8k259().b[7][1]++;}cov_60my8k259().s[21]++;argumentValues.push(this.createInstance(argClazz.baseNode.key));});}else{cov_60my8k259().b[5][1]++;}cov_60my8k259().s[22]++;clazzTree.baseNode.lifecycle.beforeCreate();const instance=(cov_60my8k259().s[23]++,InstanceHelper.createInstance(clazzTree.baseNode,argumentValues));cov_60my8k259().s[24]++;clazzTree.baseNode.lifecycle.afterCreate.bind(instance)();cov_60my8k259().s[25]++;return instance;}/** Adds new di object
	 * @public
	 * @param {DependencyTree} diObjectClazzTree
	 */addDIObject(diObjectClazzTree){cov_60my8k259().f[7]++;cov_60my8k259().s[26]++;if(diObjectClazzTree.baseNode.lifecycle.id!==LifecycleEnum.Demanded){cov_60my8k259().b[8][0]++;cov_60my8k259().s[27]++;throw new ContainerHasClassWithInvalidLifecycle("Demanded",diObjectClazzTree);}else{cov_60my8k259().b[8][1]++;}cov_60my8k259().s[28]++;this.classTreeList.push(diObjectClazzTree);}/** Creates new instance of di object
	 *
	 * @param {DIObjectKey} key
	 * @returns {Object|FunctionWrapper}
	 */createInstance(key){cov_60my8k259().f[8]++;// create new instance and add it in Map
// const clazz = this.classTreeList.find(cls => deepEqual(Symbol.keyFor(cls.baseNode.key.key), Symbol.keyFor(key.key)));
const clazz=(cov_60my8k259().s[29]++,this.classTreeList.find(cls=>{cov_60my8k259().f[9]++;cov_60my8k259().s[30]++;return cls.baseNode.key.key===key.key;}));cov_60my8k259().s[31]++;if(!clazz){cov_60my8k259().b[9][0]++;cov_60my8k259().s[32]++;return undefined;}else{cov_60my8k259().b[9][1]++;}cov_60my8k259().s[33]++;return this.#buildInstance(clazz);}/** Returns context that's a parent container of this SessionContainer
	 *
	 * @returns {ContextContainer}
	 */getParent(){cov_60my8k259().f[10]++;cov_60my8k259().s[34]++;return this.#parent;}}export default DemandedFactory;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJjb3ZfNjBteThrMjU5IiwiYWN0dWFsQ292ZXJhZ2UiLCJMaWZlY3ljbGVFbnVtIiwiQ29udGFpbmVySGFzQ2xhc3NXaXRoSW52YWxpZExpZmVjeWNsZSIsIkZ1bmN0aW9uV3JhcHBlciIsIkFic3RyYWN0Q29udGV4dENvbnRhaW5lciIsIkRlcGVuZGVuY3lUcmVlIiwiRElPYmplY3RLZXkiLCJJbnN0YW5jZUhlbHBlciIsIkludmFsaWREZW1hbmRlZEZhY3RvcnlQYXJlbnQiLCJFcnJvciIsImNvbnN0cnVjdG9yIiwiZiIsInMiLCJEZW1hbmRlZEZhY3RvcnlDbGFzc1RyZWVMaXN0SW52YWxpZCIsIkRlbWFuZGVkRmFjdG9yeSIsInBhcmVudCIsImNsYXNzVHJlZUxpc3QiLCJiIiwiQXJyYXkiLCJpc0FycmF5IiwibGVuZ3RoIiwiZmluZCIsImNsc1RyZWUiLCJjbGFzc1dpdGhJbnZhbGlkTGlmZWN5Y2xlIiwiY2xzIiwiYmFzZU5vZGUiLCJsaWZlY3ljbGUiLCJpZCIsIkRlbWFuZGVkIiwiYnVpbGRJbnN0YW5jZSIsIiNidWlsZEluc3RhbmNlIiwiY2xhenpUcmVlIiwiYXJndW1lbnRWYWx1ZXMiLCJhcmdzIiwiZm9yRWFjaCIsImFyZyIsImFyZ0NsYXp6IiwiZ2V0UGFyZW50IiwibmFtZSIsImV4aXN0ZWRJbnN0YW5jZSIsImdldEluc3RhbmNlIiwidW5kZWZpbmVkIiwicHVzaCIsImNyZWF0ZUluc3RhbmNlIiwia2V5IiwiYmVmb3JlQ3JlYXRlIiwiaW5zdGFuY2UiLCJhZnRlckNyZWF0ZSIsImJpbmQiLCJhZGRESU9iamVjdCIsImRpT2JqZWN0Q2xhenpUcmVlIiwiY2xhenoiXSwic291cmNlcyI6WyJEZW1hbmRlZEZhY3RvcnkuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IExpZmVjeWNsZUVudW0gZnJvbSBcIi4uL2NvbnN0YW50cy9MaWZlY3ljbGVFbnVtLmpzXCI7XHJcbmltcG9ydCBDb250YWluZXJIYXNDbGFzc1dpdGhJbnZhbGlkTGlmZWN5Y2xlIGZyb20gXCIuLi9lcnJvcnMvQ29udGFpbmVySGFzQ2xhc3NXaXRoSW52YWxpZExpZmVjeWNsZS5qc1wiO1xyXG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tdW51c2VkLXZhcnNcclxuaW1wb3J0IEZ1bmN0aW9uV3JhcHBlciBmcm9tIFwiLi4vd3JhcHBlcnMvRnVuY3Rpb25XcmFwcGVyLmpzXCI7XHJcbi8vIGltcG9ydCBkZWVwRXF1YWwgZnJvbSBcIi4uL3V0aWxzL2RlZXBFcXVhbC5qc1wiO1xyXG5pbXBvcnQgQWJzdHJhY3RDb250ZXh0Q29udGFpbmVyIGZyb20gXCIuL0Fic3RyYWN0Q29udGV4dENvbnRhaW5lci5qc1wiO1xyXG5pbXBvcnQgRGVwZW5kZW5jeVRyZWUgZnJvbSBcIi4vaGVscGVycy9EZXBlbmRlbmN5VHJlZS5qc1wiO1xyXG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tdW51c2VkLXZhcnNcclxuaW1wb3J0IERJT2JqZWN0S2V5IGZyb20gXCIuL2hlbHBlcnMvRElPYmplY3RLZXkuanNcIjtcclxuaW1wb3J0IEluc3RhbmNlSGVscGVyIGZyb20gXCIuL2hlbHBlcnMvSW5zdGFuY2VIZWxwZXIuanNcIjtcclxuXHJcbmNsYXNzIEludmFsaWREZW1hbmRlZEZhY3RvcnlQYXJlbnQgZXh0ZW5kcyBFcnJvciB7XHJcblx0Y29uc3RydWN0b3IoKSB7XHJcblx0XHRzdXBlcihcclxuXHRcdFx0XCJJbnZhbGlkIGRlbWFuZGVkIGZhY3RvcnkgcGFyZW50LiBcIiArXHJcblx0XHRcdFx0XCJQYXJlbnQgbXVzdCBiZSBhbiBpbnN0YW5jZSBvZiBBYnN0cmFjdENvbnRleHRDb250YWluZXIgb3IgaXQncyBkZXJpdmVkIGNsYXNzLCBudWxsIG9yIHVuZGVmaW5lZC5cIixcclxuXHRcdCk7XHJcblx0fVxyXG59XHJcblxyXG5jbGFzcyBEZW1hbmRlZEZhY3RvcnlDbGFzc1RyZWVMaXN0SW52YWxpZCBleHRlbmRzIEVycm9yIHtcclxuXHRjb25zdHJ1Y3RvcigpIHtcclxuXHRcdHN1cGVyKFxyXG5cdFx0XHRcIkRlbWFuZGVkRmFjdG9yeSBjb25zdHJ1Y3RvcidzIGFyZ3VtZW50ICdjbGFzc1RyZWVMaXN0JyBpcyBpbnZhbGlkLiBcIiArXHJcblx0XHRcdFx0XCJBcmd1bWVudCAnY2xhc3NUcmVlTGlzdCcgbXVzdCBiZSBhbiBhcnJheSBvZiBEZXBlbmRlbmN5VHJlZSBpbnN0YW5jZXNcIixcclxuXHRcdCk7XHJcblx0fVxyXG59XHJcblxyXG4vKiogQ2xhc3MgcmVwcmVzZW50aW5nIGEgREkgb2JqZWN0cyBmYWN0b3J5IGZvciBvYmplY3RzIHdpdGggZGVtYW5kZWQgbGlmZWN5Y2xlXHJcbiAqIEBjbGFzc1xyXG4gKi9cclxuY2xhc3MgRGVtYW5kZWRGYWN0b3J5IHtcclxuXHQvKipcclxuXHQgKlxyXG5cdCAqIEBwYXJhbSB7QWJzdHJhY3RDb250ZXh0Q29udGFpbmVyfSBwYXJlbnQgLSBwYXJlbnQgY29udGFpbmVyXHJcblx0ICogQHBhcmFtIHtEZXBlbmRlbmN5VHJlZVtdfSBbY2xhc3NUcmVlTGlzdD1bXV0gLSBsaXN0IG9mIGRpIG9iamVjdHMgZGVwZW5kZW5jeSB0cmVlXHJcblx0ICovXHJcblx0Y29uc3RydWN0b3IocGFyZW50LCBjbGFzc1RyZWVMaXN0ID0gW10pIHtcclxuXHRcdGlmICghKHBhcmVudCBpbnN0YW5jZW9mIEFic3RyYWN0Q29udGV4dENvbnRhaW5lcikpIHtcclxuXHRcdFx0dGhyb3cgbmV3IEludmFsaWREZW1hbmRlZEZhY3RvcnlQYXJlbnQoKTtcclxuXHRcdH1cclxuXHRcdGlmICghQXJyYXkuaXNBcnJheShjbGFzc1RyZWVMaXN0KSB8fCAoY2xhc3NUcmVlTGlzdC5sZW5ndGggJiYgY2xhc3NUcmVlTGlzdC5maW5kKChjbHNUcmVlKSA9PiAhKGNsc1RyZWUgaW5zdGFuY2VvZiBEZXBlbmRlbmN5VHJlZSkpKSkge1xyXG5cdFx0XHR0aHJvdyBuZXcgRGVtYW5kZWRGYWN0b3J5Q2xhc3NUcmVlTGlzdEludmFsaWQoKTtcclxuXHRcdH1cclxuXHRcdGNvbnN0IGNsYXNzV2l0aEludmFsaWRMaWZlY3ljbGUgPSBjbGFzc1RyZWVMaXN0LmZpbmQoKGNscykgPT4gY2xzLmJhc2VOb2RlLmxpZmVjeWNsZS5pZCAhPT0gTGlmZWN5Y2xlRW51bS5EZW1hbmRlZCk7XHJcblx0XHRpZiAoY2xhc3NXaXRoSW52YWxpZExpZmVjeWNsZSkge1xyXG5cdFx0XHR0aHJvdyBuZXcgQ29udGFpbmVySGFzQ2xhc3NXaXRoSW52YWxpZExpZmVjeWNsZShcIkRlbWFuZGVkXCIsIGNsYXNzV2l0aEludmFsaWRMaWZlY3ljbGUpO1xyXG5cdFx0fVxyXG5cdFx0dGhpcy5jbGFzc1RyZWVMaXN0ID0gY2xhc3NUcmVlTGlzdDtcclxuXHRcdHRoaXMuI3BhcmVudCA9IHBhcmVudDtcclxuXHR9XHJcblxyXG5cdCNwYXJlbnQ7XHJcblxyXG5cdCNidWlsZEluc3RhbmNlKGNsYXp6VHJlZSkge1xyXG5cdFx0Y29uc3QgYXJndW1lbnRWYWx1ZXMgPSBbXTtcclxuXHRcdGlmIChjbGF6elRyZWUuYmFzZU5vZGUuY29uc3RydWN0b3IuYXJncy5sZW5ndGggPiAwKSB7XHJcblx0XHRcdGNsYXp6VHJlZS5iYXNlTm9kZS5jb25zdHJ1Y3Rvci5hcmdzLmZvckVhY2goKGFyZykgPT4ge1xyXG5cdFx0XHRcdGNvbnN0IGFyZ0NsYXp6ID0gdGhpcy5nZXRQYXJlbnQoKS5jbGFzc1RyZWVMaXN0LmZpbmQoKGNsc1RyZWUpID0+IGNsc1RyZWUuYmFzZU5vZGUubmFtZSA9PT0gYXJnKTtcclxuXHRcdFx0XHRjb25zdCBleGlzdGVkSW5zdGFuY2UgPVxyXG5cdFx0XHRcdFx0YXJnQ2xhenouYmFzZU5vZGUubGlmZWN5Y2xlLmlkICE9PSBMaWZlY3ljbGVFbnVtLkRlbWFuZGVkXHJcblx0XHRcdFx0XHRcdD8gdGhpcy5nZXRQYXJlbnQoKS5nZXRJbnN0YW5jZShhcmdDbGF6ei5iYXNlTm9kZS5uYW1lLCBhcmdDbGF6ei5iYXNlTm9kZS5saWZlY3ljbGUuaWQsIHRydWUpXHJcblx0XHRcdFx0XHRcdDogdW5kZWZpbmVkO1xyXG5cdFx0XHRcdGlmIChleGlzdGVkSW5zdGFuY2UpIHtcclxuXHRcdFx0XHRcdHJldHVybiBhcmd1bWVudFZhbHVlcy5wdXNoKGV4aXN0ZWRJbnN0YW5jZSk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdGFyZ3VtZW50VmFsdWVzLnB1c2godGhpcy5jcmVhdGVJbnN0YW5jZShhcmdDbGF6ei5iYXNlTm9kZS5rZXkpKTtcclxuXHRcdFx0fSk7XHJcblx0XHR9XHJcblx0XHRjbGF6elRyZWUuYmFzZU5vZGUubGlmZWN5Y2xlLmJlZm9yZUNyZWF0ZSgpO1xyXG5cdFx0Y29uc3QgaW5zdGFuY2UgPSBJbnN0YW5jZUhlbHBlci5jcmVhdGVJbnN0YW5jZShjbGF6elRyZWUuYmFzZU5vZGUsIGFyZ3VtZW50VmFsdWVzKTtcclxuXHRcdGNsYXp6VHJlZS5iYXNlTm9kZS5saWZlY3ljbGUuYWZ0ZXJDcmVhdGUuYmluZChpbnN0YW5jZSkoKTtcclxuXHRcdHJldHVybiBpbnN0YW5jZTtcclxuXHR9XHJcblxyXG5cdC8qKiBBZGRzIG5ldyBkaSBvYmplY3RcclxuXHQgKiBAcHVibGljXHJcblx0ICogQHBhcmFtIHtEZXBlbmRlbmN5VHJlZX0gZGlPYmplY3RDbGF6elRyZWVcclxuXHQgKi9cclxuXHRhZGRESU9iamVjdChkaU9iamVjdENsYXp6VHJlZSkge1xyXG5cdFx0aWYgKGRpT2JqZWN0Q2xhenpUcmVlLmJhc2VOb2RlLmxpZmVjeWNsZS5pZCAhPT0gTGlmZWN5Y2xlRW51bS5EZW1hbmRlZCkge1xyXG5cdFx0XHR0aHJvdyBuZXcgQ29udGFpbmVySGFzQ2xhc3NXaXRoSW52YWxpZExpZmVjeWNsZShcIkRlbWFuZGVkXCIsIGRpT2JqZWN0Q2xhenpUcmVlKTtcclxuXHRcdH1cclxuXHRcdHRoaXMuY2xhc3NUcmVlTGlzdC5wdXNoKGRpT2JqZWN0Q2xhenpUcmVlKTtcclxuXHR9XHJcblxyXG5cdC8qKiBDcmVhdGVzIG5ldyBpbnN0YW5jZSBvZiBkaSBvYmplY3RcclxuXHQgKlxyXG5cdCAqIEBwYXJhbSB7RElPYmplY3RLZXl9IGtleVxyXG5cdCAqIEByZXR1cm5zIHtPYmplY3R8RnVuY3Rpb25XcmFwcGVyfVxyXG5cdCAqL1xyXG5cdGNyZWF0ZUluc3RhbmNlKGtleSkge1xyXG5cdFx0Ly8gY3JlYXRlIG5ldyBpbnN0YW5jZSBhbmQgYWRkIGl0IGluIE1hcFxyXG5cdFx0Ly8gY29uc3QgY2xhenogPSB0aGlzLmNsYXNzVHJlZUxpc3QuZmluZChjbHMgPT4gZGVlcEVxdWFsKFN5bWJvbC5rZXlGb3IoY2xzLmJhc2VOb2RlLmtleS5rZXkpLCBTeW1ib2wua2V5Rm9yKGtleS5rZXkpKSk7XHJcblx0XHRjb25zdCBjbGF6eiA9IHRoaXMuY2xhc3NUcmVlTGlzdC5maW5kKChjbHMpID0+IGNscy5iYXNlTm9kZS5rZXkua2V5ID09PSBrZXkua2V5KTtcclxuXHRcdGlmICghY2xhenopIHtcclxuXHRcdFx0cmV0dXJuIHVuZGVmaW5lZDtcclxuXHRcdH1cclxuXHRcdHJldHVybiB0aGlzLiNidWlsZEluc3RhbmNlKGNsYXp6KTtcclxuXHR9XHJcblxyXG5cdC8qKiBSZXR1cm5zIGNvbnRleHQgdGhhdCdzIGEgcGFyZW50IGNvbnRhaW5lciBvZiB0aGlzIFNlc3Npb25Db250YWluZXJcclxuXHQgKlxyXG5cdCAqIEByZXR1cm5zIHtDb250ZXh0Q29udGFpbmVyfVxyXG5cdCAqL1xyXG5cdGdldFBhcmVudCgpIHtcclxuXHRcdHJldHVybiB0aGlzLiNwYXJlbnQ7XHJcblx0fVxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBEZW1hbmRlZEZhY3Rvcnk7XHJcbiJdLCJtYXBwaW5ncyI6InVsTkFlWTtBQUFBQSxhQUFBLFNBQUFBLENBQUEsU0FBQUMsY0FBQSxXQUFBQSxjQUFBLEVBQUFELGFBQUEsR0FmWixNQUFPLENBQUFFLGFBQWEsS0FBTSwrQkFBK0IsQ0FDekQsTUFBTyxDQUFBQyxxQ0FBcUMsS0FBTSxvREFBb0QsQ0FDdEc7QUFDQSxNQUFPLENBQUFDLGVBQWUsS0FBTSxnQ0FB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