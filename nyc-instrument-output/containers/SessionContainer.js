function cov_2hruho1cro(){var path="D:\\Programming\\xyz\\dizy\\src\\containers\\SessionContainer.js";var hash="8c30675ab876dfb50b2ca3873b1ddaff125c8fc6";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"D:\\Programming\\xyz\\dizy\\src\\containers\\SessionContainer.js",statementMap:{"0":{start:{line:22,column:2},end:{line:22,column:31}},"1":{start:{line:23,column:36},end:{line:23,column:116}},"2":{start:{line:23,column:64},end:{line:23,column:115}},"3":{start:{line:24,column:2},end:{line:26,column:3}},"4":{start:{line:25,column:3},end:{line:25,column:89}},"5":{start:{line:27,column:2},end:{line:27,column:24}},"6":{start:{line:31,column:12},end:{line:31,column:17}},"7":{start:{line:33,column:14},end:{line:33,column:32}},"8":{start:{line:40,column:2},end:{line:40,column:28}},"9":{start:{line:40,column:21},end:{line:40,column:28}},"10":{start:{line:41,column:2},end:{line:49,column:5}},"11":{start:{line:45,column:3},end:{line:47,column:4}},"12":{start:{line:46,column:4},end:{line:46,column:11}},"13":{start:{line:48,column:3},end:{line:48,column:28}},"14":{start:{line:50,column:2},end:{line:50,column:23}},"15":{start:{line:58,column:2},end:{line:60,column:3}},"16":{start:{line:59,column:3},end:{line:59,column:81}},"17":{start:{line:61,column:2},end:{line:61,column:39}},"18":{start:{line:62,column:2},end:{line:62,column:14}},"19":{start:{line:66,column:2},end:{line:66,column:42}},"20":{start:{line:67,column:19},end:{line:67,column:45}},"21":{start:{line:68,column:2},end:{line:68,column:56}},"22":{start:{line:69,column:2},end:{line:69,column:18}},"23":{start:{line:79,column:2},end:{line:81,column:3}},"24":{start:{line:80,column:3},end:{line:80,column:97}},"25":{start:{line:83,column:2},end:{line:90,column:3}},"26":{start:{line:85,column:4},end:{line:85,column:43}},"27":{start:{line:86,column:4},end:{line:86,column:48}},"28":{start:{line:89,column:3},end:{line:89,column:110}},"29":{start:{line:91,column:2},end:{line:91,column:41}},"30":{start:{line:100,column:2},end:{line:100,column:35}},"31":{start:{line:100,column:22},end:{line:100,column:35}},"32":{start:{line:101,column:2},end:{line:103,column:3}},"33":{start:{line:102,column:3},end:{line:102,column:97}},"34":{start:{line:104,column:2},end:{line:104,column:38}},"35":{start:{line:114,column:2},end:{line:114,column:39}},"36":{start:{line:114,column:22},end:{line:114,column:39}},"37":{start:{line:115,column:2},end:{line:115,column:38}},"38":{start:{line:123,column:2},end:{line:123,column:22}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:21,column:1},end:{line:21,column:2}},loc:{start:{line:21,column:41},end:{line:29,column:2}},line:21},"1":{name:"(anonymous_1)",decl:{start:{line:23,column:55},end:{line:23,column:56}},loc:{start:{line:23,column:64},end:{line:23,column:115}},line:23},"2":{name:"(anonymous_2)",decl:{start:{line:38,column:1},end:{line:38,column:2}},loc:{start:{line:38,column:8},end:{line:51,column:2}},line:38},"3":{name:"(anonymous_3)",decl:{start:{line:41,column:29},end:{line:41,column:30}},loc:{start:{line:41,column:38},end:{line:49,column:3}},line:41},"4":{name:"(anonymous_4)",decl:{start:{line:57,column:1},end:{line:57,column:2}},loc:{start:{line:57,column:32},end:{line:63,column:2}},line:57},"5":{name:"(anonymous_5)",decl:{start:{line:77,column:1},end:{line:77,column:2}},loc:{start:{line:77,column:29},end:{line:92,column:2}},line:77},"6":{name:"(anonymous_6)",decl:{start:{line:84,column:28},end:{line:84,column:29}},loc:{start:{line:84,column:41},end:{line:87,column:4}},line:84},"7":{name:"(anonymous_7)",decl:{start:{line:99,column:1},end:{line:99,column:2}},loc:{start:{line:99,column:18},end:{line:105,column:2}},line:99},"8":{name:"(anonymous_8)",decl:{start:{line:112,column:1},end:{line:112,column:2}},loc:{start:{line:112,column:18},end:{line:116,column:2}},line:112},"9":{name:"(anonymous_9)",decl:{start:{line:122,column:1},end:{line:122,column:2}},loc:{start:{line:122,column:13},end:{line:124,column:2}},line:122}},branchMap:{"0":{loc:{start:{line:21,column:21},end:{line:21,column:39}},type:"default-arg",locations:[{start:{line:21,column:37},end:{line:21,column:39}}],line:21},"1":{loc:{start:{line:24,column:2},end:{line:26,column:3}},type:"if",locations:[{start:{line:24,column:2},end:{line:26,column:3}},{start:{line:undefined,column:undefined},end:{line:undefined,column:undefined}}],line:24},"2":{loc:{start:{line:40,column:2},end:{line:40,column:28}},type:"if",locations:[{start:{line:40,column:2},end:{line:40,column:28}},{start:{line:undefined,column:undefined},end:{line:undefined,column:undefined}}],line:40},"3":{loc:{start:{line:45,column:3},end:{line:47,column:4}},type:"if",locations:[{start:{line:45,column:3},end:{line:47,column:4}},{start:{line:undefined,column:undefined},end:{line:undefined,column:undefined}}],line:45},"4":{loc:{start:{line:58,column:2},end:{line:60,column:3}},type:"if",locations:[{start:{line:58,column:2},end:{line:60,column:3}},{start:{line:undefined,column:undefined},end:{line:undefined,column:undefined}}],line:58},"5":{loc:{start:{line:79,column:2},end:{line:81,column:3}},type:"if",locations:[{start:{line:79,column:2},end:{line:81,column:3}},{start:{line:undefined,column:undefined},end:{line:undefined,column:undefined}}],line:79},"6":{loc:{start:{line:83,column:2},end:{line:90,column:3}},type:"if",locations:[{start:{line:83,column:2},end:{line:90,column:3}},{start:{line:undefined,column:undefined},end:{line:undefined,column:undefined}}],line:83},"7":{loc:{start:{line:100,column:2},end:{line:100,column:35}},type:"if",locations:[{start:{line:100,column:2},end:{line:100,column:35}},{start:{line:undefined,column:undefined},end:{line:undefined,column:undefined}}],line:100},"8":{loc:{start:{line:101,column:2},end:{line:103,column:3}},type:"if",locations:[{start:{line:101,column:2},end:{line:103,column:3}},{start:{line:undefined,column:undefined},end:{line:undefined,column:undefined}}],line:101},"9":{loc:{start:{line:114,column:2},end:{line:114,column:39}},type:"if",locations:[{start:{line:114,column:2},end:{line:114,column:39}},{start:{line:undefined,column:undefined},end:{line:undefined,column:undefined}}],line:114}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0},f:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0},b:{"0":[0],"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"8c30675ab876dfb50b2ca3873b1ddaff125c8fc6"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_2hruho1cro=function(){return actualCoverage;};}return actualCoverage;}cov_2hruho1cro();import LifecycleEnum from"../constants/LifecycleEnum.js";import ContainerHasClassWithInvalidLifecycle from"../errors/ContainerHasClassWithInvalidLifecycle.js";// eslint-disable-next-line no-unused-vars
import FunctionWrapper from"../wrappers/FunctionWrapper.js";// eslint-disable-next-line no-unused-vars
import ContextContainer from"./ContextContainer.js";import SimpleContainer from"./SimpleContainer.js";import DIObjectKey from"./helpers/DIObjectKey.js";import InstancesMap from"./helpers/InstancesMap.js";/** Class representing simple DI container with session lifecycle
 * @class
 * @extends SimpleContainer
 */class SessionContainer extends SimpleContainer{/**
	 *
	 * @param {AbstractContextContainer} parent - parent container
	 * @param {DependencyTree[]} [classTreeList=[]] - list of di objects dependency tree
	 */constructor(parent,classTreeList=(cov_2hruho1cro().b[0][0]++,[])){cov_2hruho1cro().f[0]++;cov_2hruho1cro().s[0]++;super(parent,classTreeList);const classWithInvalidLifecycle=(cov_2hruho1cro().s[1]++,classTreeList.find(cls=>{cov_2hruho1cro().f[1]++;cov_2hruho1cro().s[2]++;return cls.baseNode.lifecycle.id!==LifecycleEnum.Session;}));cov_2hruho1cro().s[3]++;if(classWithInvalidLifecycle){cov_2hruho1cro().b[1][0]++;cov_2hruho1cro().s[4]++;throw new ContainerHasClassWithInvalidLifecycle("Session",classWithInvalidLifecycle);}else{cov_2hruho1cro().b[1][1]++;}cov_2hruho1cro().s[5]++;this.#parent=parent;// this.#init();
}#isReady=(cov_2hruho1cro().s[6]++,false);#parent;#instances=(cov_2hruho1cro().s[7]++,new InstancesMap());/** Creates instance of each di object in this container
	 * @public
	 */init(){cov_2hruho1cro().f[2]++;cov_2hruho1cro().s[8]++;// ToDo logs
if(this.#isReady){cov_2hruho1cro().b[2][0]++;cov_2hruho1cro().s[9]++;return;}else{cov_2hruho1cro().b[2][1]++;}cov_2hruho1cro().s[10]++;this.classTreeList.forEach(cls=>{cov_2hruho1cro().f[3]++;cov_2hruho1cro().s[11]++;// if (this.#instances.has(cls.baseNode.key.key)) {
//     return;
// }
if(this.#instances.has(cls.baseNode.key.key)){cov_2hruho1cro().b[3][0]++;cov_2hruho1cro().s[12]++;return;}else{cov_2hruho1cro().b[3][1]++;}cov_2hruho1cro().s[13]++;this.#buildInstance(cls);});cov_2hruho1cro().s[14]++;this.#isReady=true;}/** Adds new di object
	 * @public
	 * @param {DependencyTree} diObjectClazzTree
	 */addDIObject(diObjectClazzTree){cov_2hruho1cro().f[4]++;cov_2hruho1cro().s[15]++;if(diObjectClazzTree.baseNode.lifecycle.id!==LifecycleEnum.Session){cov_2hruho1cro().b[4][0]++;cov_2hruho1cro().s[16]++;throw new ContainerHasClassWithInvalidLifecycle("Session",diObjectClazzTree);}else{cov_2hruho1cro().b[4][1]++;}cov_2hruho1cro().s[17]++;super.addDIObject(diObjectClazzTree);cov_2hruho1cro().s[18]++;this.init();}#buildInstance(clazz){cov_2hruho1cro().s[19]++;clazz.baseNode.lifecycle.beforeCreate();const instance=(cov_2hruho1cro().s[20]++,this._buildInstance(clazz));cov_2hruho1cro().s[21]++;clazz.baseNode.lifecycle.afterCreate.bind(instance)();cov_2hruho1cro().s[22]++;return instance;}/** Adds instance to instancesMap
	 * @protected
	 * @param {DIObjectKey} key
	 * @param {Object|FunctionWrapper} instance
	 */_addInstance(key,instance){cov_2hruho1cro().f[5]++;cov_2hruho1cro().s[23]++;// check that key is valid (there is a classTree node with that key)
if(!(key instanceof DIObjectKey)){cov_2hruho1cro().b[5][0]++;cov_2hruho1cro().s[24]++;throw new Error(`Invalid key type. Argument 'key' must be an instance of DIObjectKey class.`);}else{cov_2hruho1cro().b[5][1]++;}// delete this rule, because we need to access adding instance from outside
cov_2hruho1cro().s[25]++;if(!this.classTreeList.find(clsTree=>{cov_2hruho1cro().f[6]++;cov_2hruho1cro().s[26]++;console.log(clsTree.baseNode.key,key);cov_2hruho1cro().s[27]++;return clsTree.baseNode.key.key===key.key;})){cov_2hruho1cro().b[6][0]++;cov_2hruho1cro().s[28]++;throw new Error(`ClassTree with key ${key.key} in '${this.getParent().name}/SessionContainer' not found.`);}else{cov_2hruho1cro().b[6][1]++;}cov_2hruho1cro().s[29]++;this.#instances.set(key.key,instance);}/** Returns boolean indicating whether an element with the specified key exists or not.
	 *
	 * @param {DIObjectKey} key
	 * @returns {boolean}
	 */hasInstance(key){cov_2hruho1cro().f[7]++;cov_2hruho1cro().s[30]++;if(!this.#isReady){cov_2hruho1cro().b[7][0]++;cov_2hruho1cro().s[31]++;return false;}else{cov_2hruho1cro().b[7][1]++;}cov_2hruho1cro().s[32]++;if(!(key instanceof DIObjectKey)){cov_2hruho1cro().b[8][0]++;cov_2hruho1cro().s[33]++;throw new Error(`Invalid argument 'key'. Argument 'key' must be an instance of DIObjectKey.`);}else{cov_2hruho1cro().b[8][1]++;}cov_2hruho1cro().s[34]++;return this.#instances.has(key.key);}/**
	 *
	 * @param {DIObjectKey} key
	 * @returns {Object|FunctionWrapper}
	 */getInstance(key){cov_2hruho1cro().f[8]++;cov_2hruho1cro().s[35]++;// return this.#instances.get(key.key);
if(!this.#isReady){cov_2hruho1cro().b[9][0]++;cov_2hruho1cro().s[36]++;return undefined;}else{cov_2hruho1cro().b[9][1]++;}cov_2hruho1cro().s[37]++;return this.#instances.get(key.key);}/** Returns context that's a parent container of this SessionContainer
	 *
	 * @returns {ContextContainer}
	 */getParent(){cov_2hruho1cro().f[9]++;cov_2hruho1cro().s[38]++;return this.#parent;}}export default SessionContainer;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJjb3ZfMmhydWhvMWNybyIsImFjdHVhbENvdmVyYWdlIiwiTGlmZWN5Y2xlRW51bSIsIkNvbnRhaW5lckhhc0NsYXNzV2l0aEludmFsaWRMaWZlY3ljbGUiLCJGdW5jdGlvbldyYXBwZXIiLCJDb250ZXh0Q29udGFpbmVyIiwiU2ltcGxlQ29udGFpbmVyIiwiRElPYmplY3RLZXkiLCJJbnN0YW5jZXNNYXAiLCJTZXNzaW9uQ29udGFpbmVyIiwiY29uc3RydWN0b3IiLCJwYXJlbnQiLCJjbGFzc1RyZWVMaXN0IiwiYiIsImYiLCJzIiwiY2xhc3NXaXRoSW52YWxpZExpZmVjeWNsZSIsImZpbmQiLCJjbHMiLCJiYXNlTm9kZSIsImxpZmVjeWNsZSIsImlkIiwiU2Vzc2lvbiIsImlzUmVhZHkiLCJpbnN0YW5jZXMiLCJpbml0IiwiZm9yRWFjaCIsImhhcyIsImtleSIsImJ1aWxkSW5zdGFuY2UiLCJhZGRESU9iamVjdCIsImRpT2JqZWN0Q2xhenpUcmVlIiwiI2J1aWxkSW5zdGFuY2UiLCJjbGF6eiIsImJlZm9yZUNyZWF0ZSIsImluc3RhbmNlIiwiX2J1aWxkSW5zdGFuY2UiLCJhZnRlckNyZWF0ZSIsImJpbmQiLCJfYWRkSW5zdGFuY2UiLCJFcnJvciIsImNsc1RyZWUiLCJjb25zb2xlIiwibG9nIiwiZ2V0UGFyZW50IiwibmFtZSIsInNldCIsImhhc0luc3RhbmNlIiwiZ2V0SW5zdGFuY2UiLCJ1bmRlZmluZWQiLCJnZXQiXSwic291cmNlcyI6WyJTZXNzaW9uQ29udGFpbmVyLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBMaWZlY3ljbGVFbnVtIGZyb20gXCIuLi9jb25zdGFudHMvTGlmZWN5Y2xlRW51bS5qc1wiO1xyXG5pbXBvcnQgQ29udGFpbmVySGFzQ2xhc3NXaXRoSW52YWxpZExpZmVjeWNsZSBmcm9tIFwiLi4vZXJyb3JzL0NvbnRhaW5lckhhc0NsYXNzV2l0aEludmFsaWRMaWZlY3ljbGUuanNcIjtcclxuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXVudXNlZC12YXJzXHJcbmltcG9ydCBGdW5jdGlvbldyYXBwZXIgZnJvbSBcIi4uL3dyYXBwZXJzL0Z1bmN0aW9uV3JhcHBlci5qc1wiO1xyXG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tdW51c2VkLXZhcnNcclxuaW1wb3J0IENvbnRleHRDb250YWluZXIgZnJvbSBcIi4vQ29udGV4dENvbnRhaW5lci5qc1wiO1xyXG5pbXBvcnQgU2ltcGxlQ29udGFpbmVyIGZyb20gXCIuL1NpbXBsZUNvbnRhaW5lci5qc1wiO1xyXG5pbXBvcnQgRElPYmplY3RLZXkgZnJvbSBcIi4vaGVscGVycy9ESU9iamVjdEtleS5qc1wiO1xyXG5pbXBvcnQgSW5zdGFuY2VzTWFwIGZyb20gXCIuL2hlbHBlcnMvSW5zdGFuY2VzTWFwLmpzXCI7XHJcblxyXG4vKiogQ2xhc3MgcmVwcmVzZW50aW5nIHNpbXBsZSBESSBjb250YWluZXIgd2l0aCBzZXNzaW9uIGxpZmVjeWNsZVxyXG4gKiBAY2xhc3NcclxuICogQGV4dGVuZHMgU2ltcGxlQ29udGFpbmVyXHJcbiAqL1xyXG5jbGFzcyBTZXNzaW9uQ29udGFpbmVyIGV4dGVuZHMgU2ltcGxlQ29udGFpbmVyIHtcclxuXHQvKipcclxuXHQgKlxyXG5cdCAqIEBwYXJhbSB7QWJzdHJhY3RDb250ZXh0Q29udGFpbmVyfSBwYXJlbnQgLSBwYXJlbnQgY29udGFpbmVyXHJcblx0ICogQHBhcmFtIHtEZXBlbmRlbmN5VHJlZVtdfSBbY2xhc3NUcmVlTGlzdD1bXV0gLSBsaXN0IG9mIGRpIG9iamVjdHMgZGVwZW5kZW5jeSB0cmVlXHJcblx0ICovXHJcblx0Y29uc3RydWN0b3IocGFyZW50LCBjbGFzc1RyZWVMaXN0ID0gW10pIHtcclxuXHRcdHN1cGVyKHBhcmVudCwgY2xhc3NUcmVlTGlzdCk7XHJcblx0XHRjb25zdCBjbGFzc1dpdGhJbnZhbGlkTGlmZWN5Y2xlID0gY2xhc3NUcmVlTGlzdC5maW5kKChjbHMpID0+IGNscy5iYXNlTm9kZS5saWZlY3ljbGUuaWQgIT09IExpZmVjeWNsZUVudW0uU2Vzc2lvbik7XHJcblx0XHRpZiAoY2xhc3NXaXRoSW52YWxpZExpZmVjeWNsZSkge1xyXG5cdFx0XHR0aHJvdyBuZXcgQ29udGFpbmVySGFzQ2xhc3NXaXRoSW52YWxpZExpZmVjeWNsZShcIlNlc3Npb25cIiwgY2xhc3NXaXRoSW52YWxpZExpZmVjeWNsZSk7XHJcblx0XHR9XHJcblx0XHR0aGlzLiNwYXJlbnQgPSBwYXJlbnQ7XHJcblx0XHQvLyB0aGlzLiNpbml0KCk7XHJcblx0fVxyXG5cclxuXHQjaXNSZWFkeSA9IGZhbHNlO1xyXG5cdCNwYXJlbnQ7XHJcblx0I2luc3RhbmNlcyA9IG5ldyBJbnN0YW5jZXNNYXAoKTtcclxuXHJcblx0LyoqIENyZWF0ZXMgaW5zdGFuY2Ugb2YgZWFjaCBkaSBvYmplY3QgaW4gdGhpcyBjb250YWluZXJcclxuXHQgKiBAcHVibGljXHJcblx0ICovXHJcblx0aW5pdCgpIHtcclxuXHRcdC8vIFRvRG8gbG9nc1xyXG5cdFx0aWYgKHRoaXMuI2lzUmVhZHkpIHJldHVybjtcclxuXHRcdHRoaXMuY2xhc3NUcmVlTGlzdC5mb3JFYWNoKChjbHMpID0+IHtcclxuXHRcdFx0Ly8gaWYgKHRoaXMuI2luc3RhbmNlcy5oYXMoY2xzLmJhc2VOb2RlLmtleS5rZXkpKSB7XHJcblx0XHRcdC8vICAgICByZXR1cm47XHJcblx0XHRcdC8vIH1cclxuXHRcdFx0aWYgKHRoaXMuI2luc3RhbmNlcy5oYXMoY2xzLmJhc2VOb2RlLmtleS5rZXkpKSB7XHJcblx0XHRcdFx0cmV0dXJuO1xyXG5cdFx0XHR9XHJcblx0XHRcdHRoaXMuI2J1aWxkSW5zdGFuY2UoY2xzKTtcclxuXHRcdH0pO1xyXG5cdFx0dGhpcy4jaXNSZWFkeSA9IHRydWU7XHJcblx0fVxyXG5cclxuXHQvKiogQWRkcyBuZXcgZGkgb2JqZWN0XHJcblx0ICogQHB1YmxpY1xyXG5cdCAqIEBwYXJhbSB7RGVwZW5kZW5jeVRyZWV9IGRpT2JqZWN0Q2xhenpUcmVlXHJcblx0ICovXHJcblx0YWRkRElPYmplY3QoZGlPYmplY3RDbGF6elRyZWUpIHtcclxuXHRcdGlmIChkaU9iamVjdENsYXp6VHJlZS5iYXNlTm9kZS5saWZlY3ljbGUuaWQgIT09IExpZmVjeWNsZUVudW0uU2Vzc2lvbikge1xyXG5cdFx0XHR0aHJvdyBuZXcgQ29udGFpbmVySGFzQ2xhc3NXaXRoSW52YWxpZExpZmVjeWNsZShcIlNlc3Npb25cIiwgZGlPYmplY3RDbGF6elRyZWUpO1xyXG5cdFx0fVxyXG5cdFx0c3VwZXIuYWRkRElPYmplY3QoZGlPYmplY3RDbGF6elRyZWUpO1xyXG5cdFx0dGhpcy5pbml0KCk7XHJcblx0fVxyXG5cclxuXHQjYnVpbGRJbnN0YW5jZShjbGF6eikge1xyXG5cdFx0Y2xhenouYmFzZU5vZGUubGlmZWN5Y2xlLmJlZm9yZUNyZWF0ZSgpO1xyXG5cdFx0Y29uc3QgaW5zdGFuY2UgPSB0aGlzLl9idWlsZEluc3RhbmNlKGNsYXp6KTtcclxuXHRcdGNsYXp6LmJhc2VOb2RlLmxpZmVjeWNsZS5hZnRlckNyZWF0ZS5iaW5kKGluc3RhbmNlKSgpO1xyXG5cdFx0cmV0dXJuIGluc3RhbmNlO1xyXG5cdH1cclxuXHJcblx0LyoqIEFkZHMgaW5zdGFuY2UgdG8gaW5zdGFuY2VzTWFwXHJcblx0ICogQHByb3RlY3RlZFxyXG5cdCAqIEBwYXJhbSB7RElPYmplY3RLZXl9IGtleVxyXG5cdCAqIEBwYXJhbSB7T2JqZWN0fEZ1bmN0aW9uV3JhcHBlcn0gaW5zdGFuY2VcclxuXHQgKi9cclxuXHRfYWRkSW5zdGFuY2Uoa2V5LCBpbnN0YW5jZSkge1xyXG5cdFx0Ly8gY2hlY2sgdGhhdCBrZXkgaXMgdmFsaWQgKHRoZXJlIGlzIGEgY2xhc3NUcmVlIG5vZGUgd2l0aCB0aGF0IGtleSlcclxuXHRcdGlmICghKGtleSBpbnN0YW5jZW9mIERJT2JqZWN0S2V5KSkge1xyXG5cdFx0XHR0aHJvdyBuZXcgRXJyb3IoYEludmFsaWQga2V5IHR5cGUuIEFyZ3VtZW50ICdrZXknIG11c3QgYmUgYW4gaW5zdGFuY2Ugb2YgRElPYmplY3RLZXkgY2xhc3MuYCk7XHJcblx0XHR9XHJcblx0XHQvLyBkZWxldGUgdGhpcyBydWxlLCBiZWNhdXNlIHdlIG5lZWQgdG8gYWNjZXNzIGFkZGluZyBpbnN0YW5jZSBmcm9tIG91dHNpZGVcclxuXHRcdGlmIChcclxuXHRcdFx0IXRoaXMuY2xhc3NUcmVlTGlzdC5maW5kKChjbHNUcmVlKSA9PiB7XHJcblx0XHRcdFx0Y29uc29sZS5sb2coY2xzVHJlZS5iYXNlTm9kZS5rZXksIGtleSk7XHJcblx0XHRcdFx0cmV0dXJuIGNsc1RyZWUuYmFzZU5vZGUua2V5LmtleSA9PT0ga2V5LmtleTtcclxuXHRcdFx0fSlcclxuXHRcdCkge1xyXG5cdFx0XHR0aHJvdyBuZXcgRXJyb3IoYENsYXNzVHJlZSB3aXRoIGtleSAke2tleS5rZXl9IGluICcke3RoaXMuZ2V0UGFyZW50KCkubmFtZX0vU2Vzc2lvbkNvbnRhaW5lcicgbm90IGZvdW5kLmApO1xyXG5cdFx0fVxyXG5cdFx0dGhpcy4jaW5zdGFuY2VzLnNldChrZXkua2V5LCBpbnN0YW5jZSk7XHJcblx0fVxyXG5cclxuXHQvKiogUmV0dXJucyBib29sZWFuIGluZGljYXRpbmcgd2hldGhlciBhbiBlbGVtZW50IHdpdGggdGhlIHNwZWNpZmllZCBrZXkgZXhpc3RzIG9yIG5vdC5cclxuXHQgKlxyXG5cdCAqIEBwYXJhbSB7RElPYmplY3RLZXl9IGtleVxyXG5cdCAqIEByZXR1cm5zIHtib29sZWFufVxyXG5cdCAqL1xyXG5cdGhhc0luc3RhbmNlKGtleSkge1xyXG5cdFx0aWYgKCF0aGlzLiNpc1JlYWR5KSByZXR1cm4gZmFsc2U7XHJcblx0XHRpZiAoIShrZXkgaW5zdGFuY2VvZiBESU9iamVjdEtleSkpIHtcclxuXHRcdFx0dGhyb3cgbmV3IEVycm9yKGBJbnZhbGlkIGFyZ3VtZW50ICdrZXknLiBBcmd1bWVudCAna2V5JyBtdXN0IGJlIGFuIGluc3RhbmNlIG9mIERJT2JqZWN0S2V5LmApO1xyXG5cdFx0fVxyXG5cdFx0cmV0dXJuIHRoaXMuI2luc3RhbmNlcy5oYXMoa2V5LmtleSk7XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKlxyXG5cdCAqIEBwYXJhbSB7RElPYmplY3RLZXl9IGtleVxyXG5cdCAqIEByZXR1cm5zIHtPYmplY3R8RnVuY3Rpb25XcmFwcGVyfVxyXG5cdCAqL1xyXG5cdGdldEluc3RhbmNlKGtleSkge1xyXG5cdFx0Ly8gcmV0dXJuIHRoaXMuI2luc3RhbmNlcy5nZXQoa2V5LmtleSk7XHJcblx0XHRpZiAoIXRoaXMuI2lzUmVhZHkpIHJldHVybiB1bmRlZmluZWQ7XHJcblx0XHRyZXR1cm4gdGhpcy4jaW5zdGFuY2VzLmdldChrZXkua2V5KTtcclxuXHR9XHJcblxyXG5cdC8qKiBSZXR1cm5zIGNvbnRleHQgdGhhdCdzIGEgcGFyZW50IGNvbnRhaW5lciBvZiB0aGlzIFNlc3Npb25Db250YWluZXJcclxuXHQgKlxyXG5cdCAqIEByZXR1cm5zIHtDb250ZXh0Q29udGFpbmVyfVxyXG5cdCAqL1xyXG5cdGdldFBhcmVudCgpIHtcclxuXHRcdHJldHVybiB0aGlzLiNwYXJlbnQ7XHJcblx0fVxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBTZXNzaW9uQ29udGFpbmVyO1xyXG4iXSwibWFwcGluZ3MiOiJ5c05BZVk7QUFBQUEsY0FBQSxTQUFBQSxDQUFBLFNBQUFDLGNBQUEsV0FBQUEsY0FBQSxFQUFBRCxjQUFBLEdBZlosTUFBTyxDQUFBRSxhQUFhLEtBQU0sK0JBQStCLENBQ3pELE1BQU8sQ0FBQUMscUNBQXFDLEtBQU0sb0RBQW9ELENBQ3RHO0FBQ0EsTUFBTyxDQUFBQyxlQUFlLEtBQU0sZ0NBQWdDLENBQzVEO0FBQ0EsTUFBTyxDQUFBQyxnQkFBZ0IsS0FBTSx1QkFBdUIsQ0FDcEQsTUFBTyxDQUFBQyxlQUFlLEtBQU0sc0JBQXNCLENBQ2xELE1BQU8sQ0FBQUMsV0FBVyxLQUFNLDBCQUEwQixDQUNsRCxNQUFPLENBQUFDLFlBQVksS0FBTSwyQkFBMkIsQ0FFcEQ7QUFDQTtBQUNBO0FBQ0EsR0FD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