{"version":3,"file":"dizy.js","mappings":"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","sources":["webpack://dizy/webpack/universalModuleDefinition","webpack://dizy/./ReflectionJs/index.js","webpack://dizy/./ReflectionJs/src/getArgumentDefaultValue.js","webpack://dizy/./ReflectionJs/src/getBaseClassConstructor.js","webpack://dizy/./ReflectionJs/src/getClassConstructorArgsNames.js","webpack://dizy/./ReflectionJs/src/getFunctionArgsNames.js","webpack://dizy/./ReflectionJs/src/getStringifiedEntityName.js","webpack://dizy/./ReflectionJs/src/parseType.js","webpack://dizy/webpack/bootstrap","webpack://dizy/webpack/runtime/make namespace object","webpack://dizy/./src/lifecycle/Lifecycle.js","webpack://dizy/./src/DIClazz.js","webpack://dizy/./src/constants/LifecycleEnum.js","webpack://dizy/./src/lifecycle/DemandedLifecycle.js","webpack://dizy/./src/lifecycle/SessionLifecycle.js","webpack://dizy/./src/lifecycle/SingletoneLifecycle.js","webpack://dizy/./src/DIObjectConfig.js","webpack://dizy/./src/containers/helpers/DIObjectKey.js","webpack://dizy/./src/errors/DependencyLoopError.js","webpack://dizy/./src/errors/InvalidAbstractContextConfig.js","webpack://dizy/./src/errors/InvalidDIObjectArgDefaultValue.js","webpack://dizy/./src/errors/InvalidDIObjectArgumentName.js","webpack://dizy/./src/errors/NotAllowDIObjectType.js","webpack://dizy/./src/containers/DIContainer.js","webpack://dizy/./src/containers/helpers/DependencyTreeNode.js","webpack://dizy/./src/containers/helpers/DependencyTree.js","webpack://dizy/./src/containers/AbstractDIContainer.js","webpack://dizy/./src/containers/helpers/DIObjectKeyFactory.js","webpack://dizy/./src/containers/helpers/DependencyTreeFactory.js","webpack://dizy/./src/containers/AbstractContextContainer.js","webpack://dizy/./src/errors/ContainerHasClassWithInvalidLifecycle.js","webpack://dizy/./src/wrappers/FunctionWrapper.js","webpack://dizy/./src/containers/helpers/InstanceHelper.js","webpack://dizy/./src/containers/SimpleContainer.js","webpack://dizy/./src/utils/deepEqual.js","webpack://dizy/./src/containers/helpers/InstancesMap.js","webpack://dizy/./src/containers/SessionContainer.js","webpack://dizy/./src/containers/SingletoneContainer.js","webpack://dizy/./src/containers/DemandedFactory.js","webpack://dizy/./src/containers/ContextContainer.js","webpack://dizy/./src/errors/InvalidAbstractContextParent.js","webpack://dizy/./src/errors/InvalidDIObjectKeyFactory.js","webpack://dizy/./src/containers/AbstractContextContainerFactory.js","webpack://dizy/./src/utils/generateRandomString.js","webpack://dizy/./src/errors/InvalidContextContainerNameType.js","webpack://dizy/./src/errors/NotUniqueContextContainerName.js","webpack://dizy/./src/containers/ContextContainerFactory.js","webpack://dizy/./src/index.js"],"sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"dizy\"] = factory();\n\telse\n\t\troot[\"dizy\"] = factory();\n})(global, () => {\nreturn ","const argDefaultValue = require(\"./src/getArgumentDefaultValue.js\");\nconst getBaseClassConstructor = require(\"./src/getBaseClassConstructor.js\");\nconst classConstructorArgsNames = require(\"./src/getClassConstructorArgsNames.js\");\nconst functionArgsNames = require(\"./src/getFunctionArgsNames.js\");\nconst getType = require(\"./src/parseType.js\");\n\nmodule.exports.getArgumentDefaultValue = argDefaultValue;\nmodule.exports.getClassConstructorArgsNames = classConstructorArgsNames;\nmodule.exports.getFunctionArgsNames = functionArgsNames;\nmodule.exports.parseType = getType;\nmodule.exports.getBaseClass = getBaseClassConstructor;\n","const getStringifiedEntityName = require(\"./getStringifiedEntityName.js\");\nconst parseType = require(\"./parseType.js\");\n\n/** Class representing an error thrown when getArgumentDefaultValue arg type isn't a string.\n * @class\n * @extends Error\n */\nclass ArgumentInvalidType extends Error {\n\t/**\n\t *\n\t * @param {string} argType - getArgumentDefaultValue arg type\n\t */\n\tconstructor(argType) {\n\t\tconst message = `Argument 'arg' of getArgumentDefaultValue(arg) has invalid type - ${argType}. Argument type must be a string.`;\n\t\tsuper(message);\n\t}\n}\n\n/** Class representing an error thrown when getArgumentDefaultValue arg is an empty string.\n * @class\n * @extends Error\n */\nclass ArgumentIsEmptyString extends Error {\n\tconstructor() {\n\t\tsuper(`Argument 'arg' is an empty string.`);\n\t}\n}\n\n/**\n * @typedef {Object} GetArgumentDefaultValueReturnType\n * @property {string} name\n * @property {string|undefined} value\n */\n\n// What if argument default value is primitive or a stringified object (not JSON object, but object like a simple string) ???\n/** Returns name and default value of argument\n *\n * @param {string} argStr - part of string returned by toString method of function\n * @returns {GetArgumentDefaultValueReturnType}\n */\nfunction getArgumentDefaultValue(argStr) {\n\tconst argType = parseType(argStr);\n\tif (argType !== \"string\") throw new ArgumentInvalidType(argType);\n\tif (argStr === \"\") throw new ArgumentIsEmptyString();\n\tconst parts = argStr.split(\"=\");\n\treturn {\n\t\tname: parts[0].trim(),\n\t\tvalue: parts.length > 1 ? getStringifiedEntityName(parts[1].trim()) : undefined,\n\t};\n}\n\nmodule.exports = getArgumentDefaultValue;\n","const parseType = require(\"./parseType.js\");\n\n/** Class representing an error thrown when getBaseClassConstructor arg type isn't a class or function.\n * @class\n * @extends Error\n */\nclass ClassInvalidType extends Error {\n\t/**\n\t *\n\t * @param {string} argType - getBaseClassConstructor `cls` arg type\n\t */\n\tconstructor(argType) {\n\t\tconst message = `Argument 'cls' of getBaseClass(cls) has invalid type - ${argType}. Argument type must be a class or a function.`;\n\t\tsuper(message);\n\t}\n}\n\n/** Returns constructor of `cls`\n *\n * @param {function} cls - class\n * @returns {function}\n */\nconst getBaseClassConstructor = (cls) => {\n\tconst clsType = parseType(cls);\n\tif (clsType !== \"class\" && clsType !== \"function\") throw new ClassInvalidType(clsType);\n\tconst constructor = clsType === \"class\" ? cls.prototype.__proto__.constructor : cls.prototype;\n\treturn constructor;\n};\n\nmodule.exports = getBaseClassConstructor;\n","const { findCloseBraceIndex, splitArgsStrByCommas } = require(\"./getFunctionArgsNames.js\");\nconst parseType = require(\"./parseType.js\");\n\n/** Class representing an error thrown when getClassConstructorArgsNames `cls` arg has no constructor.\n * @class\n * @extends Error\n */\nclass HasNoConstructorError extends Error {\n\tconstructor() {\n\t\tconst message = \"DI object has no one constructor. Need one or more.\";\n\t\tsuper(message);\n\t}\n}\n\n/** Class representing an error thrown when getClassConstructorArgsNames `cls` arg type isn't a class.\n * @class\n * @extends Error\n */\nclass ClsArgumentInvalidType extends Error {\n\tconstructor(clsType) {\n\t\tconst message = `Argument cls with invalid type - ${clsType}. Argument value type must be a class.`;\n\t\tsuper(message);\n\t}\n}\n\n/**\n * @typedef {Object} ParsedArgumentsType\n * @property {number} startPosition\n * @property {string[]} args - constructor stringified args commas separated\n */\n\n/** Returns class constructor arguments\n *\n * @param {function} cls - class\n * @returns {ParsedArgumentsType}\n */\nconst getClassConstructorArgsNames = (cls) => {\n\tconst clsType = parseType(cls);\n\tif (clsType !== \"class\") throw new ClsArgumentInvalidType(clsType);\n\tconst clsStr = cls.toString();\n\tconst separator = \"constructor\";\n\tconst startIndex = clsStr.indexOf(separator, 0);\n\tif (startIndex === -1) {\n\t\tthrow new HasNoConstructorError();\n\t}\n\tconst openBraceStartIndex = clsStr.indexOf(\"(\", startIndex);\n\tlet closeBraceStartIndex = findCloseBraceIndex(clsStr, openBraceStartIndex);\n\tconst argsStr = clsStr.slice(openBraceStartIndex + 1, closeBraceStartIndex);\n\tconst argsSplittedArray = splitArgsStrByCommas(argsStr);\n\tconst args = argsSplittedArray.map((arg) => arg.trim()).filter((arg) => arg !== \"\");\n\treturn {\n\t\tstartPosition: startIndex,\n\t\targs,\n\t};\n};\n\nmodule.exports = getClassConstructorArgsNames;\n","const parseType = require(\"./parseType.js\");\n\n/** Class representing an error thrown when getFunctionArgsNames `func` arg type isn't a function.\n * @class\n * @extends Error\n */\nclass FuncArgumentInvalidType extends Error {\n\t/**\n\t *\n\t * @param {string} funcType\n\t */\n\tconstructor(funcType) {\n\t\tconst message = `Argument func with invalid type - ${funcType}. Argument value type must be a function.`;\n\t\tsuper(message);\n\t}\n}\n\n/** Returns closing brace index\n *\n * @param {string} str\n * @param {number} startIndex\n * @returns {number}\n */\nconst findCloseBraceIndex = (str, startIndex) => {\n\tconst openBraceIndex = str.indexOf(\"(\", startIndex);\n\tlet closeBraceIndex = str.indexOf(\")\", openBraceIndex);\n\tconst getOpenBracesCount = (end) =>\n\t\tstr\n\t\t\t.split(\"\")\n\t\t\t.slice(openBraceIndex, end)\n\t\t\t.map((s, index) => ({ char: s, index }))\n\t\t\t.filter((s) => s.char === \"(\").length;\n\tlet openBraceBeforeCloseCount = getOpenBracesCount(closeBraceIndex);\n\tlet i = 0;\n\twhile (openBraceBeforeCloseCount > 1) {\n\t\ti++;\n\t\tcloseBraceIndex = str.indexOf(\")\", closeBraceIndex + 1);\n\t\topenBraceBeforeCloseCount = getOpenBracesCount(closeBraceIndex) - i;\n\t}\n\treturn closeBraceIndex;\n};\n\n/** Returns array of commas indexes\n *\n * @param {string} str\n * @returns {number[]}\n */\nconst findArgsSeparatorCommas = (str) => {\n\tconst allCommas = str\n\t\t.split(\"\")\n\t\t.map((char, index) => ({ char, index }))\n\t\t.filter((s) => s.char === \",\");\n\tlet prevCommaIndex = 0;\n\tconst argsSeparatorCommas = allCommas.filter((comma) => {\n\t\tconst openBracesCount = str\n\t\t\t.slice(prevCommaIndex, comma.index)\n\t\t\t.split(\"\")\n\t\t\t.filter((s) => s === \"(\").length;\n\t\tconst closeBracesCount = str\n\t\t\t.slice(prevCommaIndex, comma.index)\n\t\t\t.split(\"\")\n\t\t\t.filter((s) => s === \")\").length;\n\t\tconst openCurlyBracesCount = str\n\t\t\t.slice(prevCommaIndex, comma.index)\n\t\t\t.split(\"\")\n\t\t\t.filter((s) => s === \"{\").length;\n\t\tconst closeCurlyBracesCount = str\n\t\t\t.slice(prevCommaIndex, comma.index)\n\t\t\t.split(\"\")\n\t\t\t.filter((s) => s === \"}\").length;\n\t\tif (openBracesCount === closeBracesCount && openCurlyBracesCount === closeCurlyBracesCount) {\n\t\t\tprevCommaIndex = comma.index;\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t});\n\treturn argsSeparatorCommas.map((c) => c.index);\n};\n\n/**\tReturns arguments stringified by toString\n *\n * @param {string} argsStr\n * @returns {string[]}\n */\nconst splitArgsStrByCommas = (argsStr) => {\n\t// -1 is first, because next step will be slice with startIndex = separator[i] + 1\n\tconst separators = [-1, ...findArgsSeparatorCommas(argsStr), null];\n\treturn separators\n\t\t.slice(1)\n\t\t.map((commaIndex, i) => (commaIndex === null ? argsStr.slice(separators[i] + 1) : argsStr.slice(separators[i] + 1, commaIndex)));\n};\n\n/**\n * @typedef { Object } ParsedArgumentsType\n * @property { number } startPosition\n * @property { string[] } args - constructor stringified args commas separated\n */\n\n/**\n *\n * @param {function} func\n * @returns {ParsedArgumentsType}\n */\nconst getFunctionArgsNames = (func) => {\n\tconst funcType = parseType(func);\n\tif (funcType !== \"function\" && funcType !== \"function class\") throw new FuncArgumentInvalidType(funcType);\n\tconst funcStr = func.toString();\n\tconst openBraceIndex = funcStr.indexOf(\"(\", 0);\n\tconst closeBraceIndex = findCloseBraceIndex(funcStr, openBraceIndex);\n\tconst equalIndex = funcStr.indexOf(\"=\");\n\t// functions with one argument without braces around:\n\t// argName => {};\n\t// argName => doSth(argName);\n\tconst oneArgWithoutBraces = equalIndex !== -1 && (openBraceIndex === -1 || equalIndex < openBraceIndex);\n\tlet argsStr;\n\tif (oneArgWithoutBraces) {\n\t\targsStr = funcStr.slice(0, equalIndex);\n\t} else {\n\t\tif (openBraceIndex + 1 === closeBraceIndex)\n\t\t\targsStr = \"\"; // like function A() {}\n\t\telse argsStr = funcStr.slice(openBraceIndex + 1, closeBraceIndex);\n\t}\n\tconst argsSplittedArray = splitArgsStrByCommas(argsStr);\n\tconst args = argsSplittedArray.map((arg) => arg.trim()).filter((arg) => arg !== \"\");\n\treturn {\n\t\tstartPosition: openBraceIndex === -1 ? 0 : openBraceIndex,\n\t\targs,\n\t};\n};\n\nmodule.exports = getFunctionArgsNames;\nmodule.exports.findCloseBraceIndex = findCloseBraceIndex;\nmodule.exports.splitArgsStrByCommas = splitArgsStrByCommas;\n","const parseType = require(\"./parseType.js\");\n\n/** Class representing an error thrown when getStringifiedEntityName `entityStr` arg type isn't a string.\n * @class\n * @extends Error\n */\nclass EntityStrInvalidType extends Error {\n\t/**\n\t *\n\t * @param {any} entityStr\n\t * @param {string} entityStrType\n\t */\n\tconstructor(entityStr, entityStrType) {\n\t\tsuper(`getStringifiedEntityName argument type is invalid (${entityStr} - ${entityStrType}). 'entityStr' must be a string.`);\n\t}\n}\n\n/** Class representing an error thrown when getStringifiedEntityName `entityStr` arg is an empty string.\n * @class\n * @extends Error\n */\nclass EntityStrIsEmpty extends Error {\n\tconstructor() {\n\t\tsuper(`getStringifiedEntityName argument is an empty string.`);\n\t}\n}\n\n/** Returns name of entity.toString result\n *\n * @param {string} entityStr\n * @returns {string}\n */\nconst getStringifiedEntityName = (entityStr) => {\n\tconst entityStrType = parseType(entityStr);\n\tif (entityStrType !== \"string\") throw new EntityStrInvalidType(entityStr, entityStrType);\n\tif (entityStr === \"\") throw new EntityStrIsEmpty();\n\tif (entityStr.includes(\"WEBPACK_IMPORTED_MODULE\")) {\n\t\tconst startIndex = entityStr.indexOf(\"_\") + 1;\n\t\tconst endIndex = entityStr.indexOf(\"_\", startIndex + 1);\n\t\treturn entityStr.slice(startIndex, endIndex);\n\t}\n\treturn entityStr;\n};\n\nmodule.exports = getStringifiedEntityName;\n","/**\n * @typedef {'function'|'class'|'function class'|'string'|'number'|'boolean'|'symbol'|'object'|'undefined'} ParseTypeReturnType\n */\n\n/**\n *\n * @param {any} data\n * @returns {ParseTypeReturnType}\n */\nfunction parseType(data) {\n\tconst type = typeof data;\n\tif (type !== \"function\") {\n\t\tif (type === \"object\" && data === null) return \"null\";\n\t\treturn type;\n\t}\n\tconst typeStr = data.toString();\n\tif (typeStr.startsWith(\"class\")) {\n\t\treturn \"class\";\n\t} else if (typeStr.includes(\"_classCallCheck\")) {\n\t\treturn \"function class\";\n\t} else {\n\t\treturn \"function\";\n\t}\n}\n\nmodule.exports = parseType;\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","/** Class representing an error thrown when derived class don't implement something.\n * @class\n */\nclass NotImplementedException extends Error {\n\tconstructor() {\n\t\tthis.message = \"Not implemented error\";\n\t\tsuper(this.message);\n\t}\n}\n\n/** Abstract Class representing lifecycle of di object\n * @class\n * @abstract\n */\nclass Lifecycle {\n\t/**\n\t *\n\t * @param {number} id\n\t */\n\tconstructor(id) {\n\t\tthis.id = id;\n\t}\n\n\t/** Lifecycle method that's called before creation of di object's instance */\n\tbeforeCreate() {\n\t\tthrow new NotImplementedException();\n\t}\n\n\t/** Lifecycle method that's called after creation of di object's instance */\n\tafterCreate() {\n\t\tthrow new NotImplementedException();\n\t}\n}\n\nexport default Lifecycle;\n","import { parseType } from \"../ReflectionJs/index.js\";\nimport Lifecycle from \"./lifecycle/Lifecycle.js\";\n\n/** Supporting class for di object\n * @class\n */\nclass DIClazz {\n\t/**\n\t *\n\t * @param {string|symbol|number|object} key\n\t * @param {string} name\n\t * @param {import(\"./DIObjectConfig.js\").callbackType} type\n\t * @param {boolean} isClass\n\t * @param {Lifecycle} lifecycle\n\t * @param {{args: string[]}} constructor\n\t */\n\tconstructor(key, name, type, isClass, lifecycle, constructor) {\n\t\tif (parseType(key) === \"undefined\" || parseType(key) === \"null\" || parseType(key) === \"boolean\") {\n\t\t\tthrow new Error(\"DIClazz constructor argument 'key' is invalid. Argument 'key' must not be an undefined, null or boolean.\");\n\t\t}\n\t\tif (parseType(name) !== \"string\") {\n\t\t\tthrow new Error(\"DIClazz constructor argument 'name' is invalid. Argument 'name' type must be a string.\");\n\t\t}\n\t\tif (parseType(type) !== \"class\" && parseType(type) !== \"function\" && parseType(type) !== \"function class\") {\n\t\t\tthrow new Error(\"DIClazz constructor argument 'type' is invalid. Argument 'type' must be a class or a function.\");\n\t\t}\n\t\tif (parseType(isClass) !== \"boolean\") {\n\t\t\tthrow new Error(\"DIClazz constructor argument 'isClass' is invalid. Argument 'isClass' must be a boolean.\");\n\t\t}\n\t\tif (!(lifecycle instanceof Lifecycle)) {\n\t\t\tthrow new Error(\"DIClazz constructor argument 'lifecycle' is invalid. Argument 'lifecycle' must be an instance of Lifecycle.\");\n\t\t}\n\t\tthis.key = key;\n\t\tthis.name = name;\n\t\tthis.type = type;\n\t\tthis.isClass = isClass;\n\t\tthis.lifecycle = lifecycle;\n\t\tthis.constructor = constructor;\n\t}\n}\n\nexport default DIClazz;\n","const LifecycleEnum = {\n\tPersistent: 0,\n\tSession: 1,\n\tSingletone: 2,\n\tDemanded: 3,\n};\n\nexport default LifecycleEnum;\n","import LifecycleEnum from \"../constants/LifecycleEnum.js\";\nimport Lifecycle from \"./Lifecycle.js\";\n\n/** Class representing demanded lifecycle\n * @class\n * @extends Lifecycle\n */\nclass DemandedLifecycle extends Lifecycle {\n\t/**\n\t *\n\t * @param {import(\"../DIObjectConfig.js\").callbackType} beforeCreate - will be called before creation of di object's instance\n\t * @param {import(\"../DIObjectConfig.js\").callbackType} afterCreate - will be called after creation of di object's instance\n\t */\n\tconstructor(beforeCreate = () => {}, afterCreate = () => {}) {\n\t\tsuper(LifecycleEnum.Demanded);\n\t\tthis.beforeCreate = beforeCreate;\n\t\tthis.afterCreate = afterCreate;\n\t}\n}\n\nexport default DemandedLifecycle;\n","import LifecycleEnum from \"../constants/LifecycleEnum.js\";\nimport Lifecycle from \"./Lifecycle.js\";\n\n/** Class representing session lifecycle\n * @class\n * @extends Lifecycle\n */\nclass SessionLifecycle extends Lifecycle {\n\t/**\n\t *\n\t * @param {import(\"../DIObjectConfig.js\").callbackType} beforeCreate - will be called before creation of di object's instance\n\t * @param {import(\"../DIObjectConfig.js\").callbackType} afterCreate - will be called after creation of di object's instance\n\t */\n\tconstructor(beforeCreate = () => {}, afterCreate = () => {}) {\n\t\tsuper(LifecycleEnum.Session);\n\t\tthis.beforeCreate = beforeCreate;\n\t\tthis.afterCreate = afterCreate;\n\t}\n}\n\nexport default SessionLifecycle;\n","import LifecycleEnum from \"../constants/LifecycleEnum.js\";\nimport Lifecycle from \"./Lifecycle.js\";\n\n/** Class representing singletone lifecycle\n * @class\n * @extends Lifecycle\n */\nclass SingletoneLifecycle extends Lifecycle {\n\t/**\n\t *\n\t * @param {import(\"../DIObjectConfig.js\").callbackType} beforeCreate - will be called before creation of di object's instance\n\t * @param {import(\"../DIObjectConfig.js\").callbackType} afterCreate - will be called after creation of di object's instance\n\t */\n\tconstructor(beforeCreate = () => {}, afterCreate = () => {}) {\n\t\tsuper(LifecycleEnum.Singletone);\n\t\tthis.beforeCreate = beforeCreate;\n\t\tthis.afterCreate = afterCreate;\n\t}\n}\n\nexport default SingletoneLifecycle;\n","import { parseType } from \"../ReflectionJs/index.js\";\nimport DemandedLifecycle from \"./lifecycle/DemandedLifecycle.js\";\nimport Lifecycle from \"./lifecycle/Lifecycle.js\";\nimport SessionLifecycle from \"./lifecycle/SessionLifecycle.js\";\nimport SingletoneLifecycle from \"./lifecycle/SingletoneLifecycle.js\";\n\n/** @callback callbackType */\n\n/** Class representing an error thrown when `name` of DIObjectConfig is invalid.\n * @class\n * @extends Error\n */\nexport class InvalidDIObjectName extends Error {\n\tconstructor(name) {\n\t\tconst message = `DI object name { ${name} } is invalid. Name must be a not empty string`;\n\t\tsuper(message);\n\t\tthis.name = \"InvalidDIObjectName\";\n\t}\n}\n\n/** Class representing an error thrown when `parent` of DIObjectConfig is invalid.\n * @class\n * @extends Error\n */\nexport class InvalidDIObjectParent extends Error {\n\tconstructor() {\n\t\tconst message = \"DI object parent must be an instance of AbstractContextContainer.\";\n\t\tsuper(message);\n\t\tthis.name = \"InvalidDIObjectParent\";\n\t}\n}\n\n/** Class representing an error thrown when `lifecycle` of DIObjectConfig is unregistered.\n * @class\n * @extends Error\n */\nexport class UnregisteredDIObjectLifecycle extends Error {\n\tconstructor(lifecycle) {\n\t\tconst message = `There is no registered lifecycle with id = ${lifecycle.id}.`;\n\t\tsuper(message);\n\t\tthis.name = \"UnregisteredDIObjectLifecycle\";\n\t}\n}\n\n/** Class representing an error thrown when `lifecycle` of DIObjectConfig is invalid.\n * @class\n * @extends Error\n */\nexport class InvalidDIObjectLifecycle extends Error {\n\tconstructor(lifecycle) {\n\t\tconst message = `Invalid lifecycle { ${lifecycle} }. lifecycle prop must be an instance of Lifecycle or it's derived class.`;\n\t\tsuper(message);\n\t\tthis.name = \"InvalidDIObjectLifecycle\";\n\t}\n}\n\n/** Class representing an error thrown when `type` of DIObjectConfig is invalid.\n * @class\n * @extends Error\n */\nexport class InvalidDIObjectType extends Error {\n\tconstructor(type) {\n\t\tconst message = `DI object type { ${type} } is invalid. type prop must be a class or a function`;\n\t\tsuper(message);\n\t\tthis.name = \"InvalidDIObjectType\";\n\t}\n}\n\n/** Abstract Class representint di object config.\n * @class\n * @abstract\n * @template {Function} T\n */\nexport class DIObjectConfig {\n\t/**\n\t * @constructor\n\t * @param {string|symbol} name\n\t * @param {T} type\n\t * @param {Lifecycle} lifecycle\n\t */\n\tconstructor(name, type, lifecycle) {\n\t\tif (!(typeof name === \"string\" || typeof name === \"symbol\") || !name === true) {\n\t\t\tthrow new InvalidDIObjectName(name);\n\t\t}\n\t\tif (parseType(type) !== \"class\" && parseType(type) !== \"function\" && parseType(type) !== \"function class\") {\n\t\t\tthrow new InvalidDIObjectType(type);\n\t\t}\n\t\tif (!(lifecycle instanceof Lifecycle)) {\n\t\t\tthrow new InvalidDIObjectLifecycle(lifecycle);\n\t\t}\n\t\tthis.name = name;\n\t\tthis.type = type;\n\t\tthis.lifecycle = lifecycle;\n\t}\n}\n\n/** Class representing a config of di object with demanded lifecycle\n * @class\n * @property {DemandedLifecycle} lifecycle\n */\nexport class DemandedConfig extends DIObjectConfig {\n\t/**\n\t *\n\t * @param {string|symbol} name\n\t * @param {callbackType} type\n\t * @param {callbackType} [beforeCreate=()=>{}]\n\t * @param {callbackType} [afterCreate=()=>{}]\n\t */\n\tconstructor(name = \"\", type = {}, beforeCreate = () => {}, afterCreate = () => {}) {\n\t\tsuper(name, type, new DemandedLifecycle(beforeCreate, afterCreate));\n\t}\n}\n\n/** Class representing a config of di object with singletone lifecycle\n * @class\n * @property {SingletoneLifecycle} lifecycle\n */\nexport class SingletoneConfig extends DIObjectConfig {\n\t/**\n\t *\n\t * @param {string|symbol} name\n\t * @param {callbackType} type\n\t * @param {callbackType} [beforeCreate=()=>{}]\n\t * @param {callbackType} [afterCreate=()=>{}]\n\t */\n\tconstructor(name = \"\", type = {}, beforeCreate = () => {}, afterCreate = () => {}) {\n\t\tsuper(name, type, new SingletoneLifecycle(beforeCreate, afterCreate));\n\t}\n}\n\n/** Class representing a config of di object with session lifecycle\n * @class\n * @property {SessionLifecycle} lifecycle\n */\nexport class SessionConfig extends DIObjectConfig {\n\t/**\n\t *\n\t * @param {string|symbol} name\n\t * @param {callbackType} type\n\t * @param {callbackType} [beforeCreate=()=>{}]\n\t * @param {callbackType} [afterCreate=()=>{}]\n\t */\n\tconstructor(name = \"\", type = {}, beforeCreate = () => {}, afterCreate = () => {}) {\n\t\tsuper(name, type, new SessionLifecycle(beforeCreate, afterCreate));\n\t}\n}\n","import { parseType } from \"../../../ReflectionJs/index.js\";\n\nclass InvalidKey extends Error {\n\tconstructor(key) {\n\t\tsuper(\n\t\t\t`DIObjectKey constructor argument ('key' = ${key ? key.toString() : key} (type - ${parseType(key)})) is invalid.\\n` +\n\t\t\t\t`Argument 'key' must be a string like '@{parentName}/{DIObjectName}/{lifecycleId}/{isClass}'`,\n\t\t);\n\t}\n}\n\n/**\n * @typedef {Object} ParseKeyParentPropType\n * @property {string} name\n */\n\n/**\n * @typedef {Object} ParseKeyReturnType\n * @property {ParseKeyParentPropType} parent\n * @property {string} name\n * @property {number} lifecycle\n * @property {boolean} isClass\n */\n\n/** Class representing a key of di object\n * @class\n * @property {string} key\n */\nclass DIObjectKey {\n\t/**\n\t *\n\t * @param {string} key\n\t */\n\tconstructor(key) {\n\t\tif (typeof key !== \"string\") {\n\t\t\tthrow new InvalidKey(key);\n\t\t}\n\t\tif (!/@[\\w\\s]+\\/[\\w\\s]+\\/[\\d]+\\/true/.test(key) && !/@[\\w\\s]+\\/[\\w\\s]+\\/[\\d]+\\/false/.test(key)) {\n\t\t\tthrow new InvalidKey(key);\n\t\t}\n\t\tthis.key = key;\n\t}\n\n\t/**\n\t *\n\t * @returns {ParseKeyReturnType}\n\t */\n\tparseKey() {\n\t\t// get data from key string\n\t\t// return Symbol.keyFor(this.key);\n\t\tconst keyFields = this.key.split(\"/\");\n\t\treturn {\n\t\t\tparent: {\n\t\t\t\tname: keyFields[0].length > 1 ? keyFields[0].slice(1) : \"\",\n\t\t\t},\n\t\t\tname: keyFields[1],\n\t\t\tlifecycle: Number(keyFields[2]),\n\t\t\tisClass: Boolean(keyFields[3]),\n\t\t};\n\t}\n}\n\nexport default DIObjectKey;\n","class DependencyLoopError extends Error {\n\tconstructor(first, second) {\n\t\tconst message = `${first} requires ${second}. And ${second} requires ${first}.`;\n\t\tsuper(message);\n\t\tthis.name = \"Dependency loop error.\";\n\t}\n}\n\nexport default DependencyLoopError;\n","class InvalidAbstractContextConfig extends Error {\n\tconstructor() {\n\t\tsuper(\"Invalid context config. Config must be an array of DIObjectConfig instances\");\n\t}\n}\n\nexport default InvalidAbstractContextConfig;\n","class InvalidDIObjectArgDefaultValue extends Error {\n\tconstructor(type, argName, defaultValue) {\n\t\tconst message = `Invalid argument { ${argName} } default value in ${type}. There is no { ${defaultValue} } in DI Container.`;\n\t\tsuper(message);\n\t\tthis.name = \"Invalid DI Object arg default value error.\";\n\t}\n}\n\nexport default InvalidDIObjectArgDefaultValue;\n","class InvalidDIObjectArgumentName extends Error {\n\tconstructor(type, argName) {\n\t\tconst message = `Invalid argument name { ${argName} } in ${type}. There is no object with name { ${argName} } in DI Container.`;\n\t\tsuper(message);\n\t\tthis.name = \"Invalid DI Object arg name error.\";\n\t}\n}\n\nexport default InvalidDIObjectArgumentName;\n","class NotAllowedDIObjectType extends Error {\n\tconstructor(data) {\n\t\tconst message = `Not allowed DI object type of ${data.__proto__.prototype.name}. DI object must be class or function.`;\n\t\tsuper(message);\n\t\tthis.name = \"Invalid DI Object type.\";\n\t}\n}\n\nexport default NotAllowedDIObjectType;\n","/** Interface for classes that repressent a di container\n * @abstract\n */\nclass DIContainer {\n\tconstructor() {}\n\n\t/** Returns true if there is an instance of di object in DIContainer. */\n\thasInstance() {}\n\n\t/** Get an instance of di object. */\n\tgetInstance() {}\n\n\t/** Get parent DIContainer. */\n\tgetParent() {}\n\n\t/** Returns `true` if type of di object with specified key is the same as 'type' argument.\n\t *\n\t * @param {string|symbol} key - 'key' of di object\n\t * @param {any} type - type of di object\n\t * @returns {boolean}\n\t */\n\t// eslint-disable-next-line no-unused-vars\n\ttypeMatch(key, type) {\n\t\t// is DI object with key instance of type\n\t}\n}\n\nexport default DIContainer;\n","import { parseType } from \"../../../ReflectionJs/index.js\";\nimport DIClazz from \"../../DIClazz.js\";\n\n/** Class representing a node of dependency tree\n * @class\n * @extends DIClazz\n * @property {number} height\n * @property {DependencyTreeNode[]} deps\n */\nclass DependencyTreeNode extends DIClazz {\n\t/**\n\t *\n\t * @param {DIClazz} baseClazz\n\t * @param {number} height\n\t * @param {DependencyTreeNode[]} deps\n\t */\n\tconstructor(baseClazz, height, deps) {\n\t\tif (!(baseClazz instanceof DIClazz)) {\n\t\t\tthrow new Error(\"DependencyTreeNode 'baseClazz' is invalid. Constructor argument 'baseClazz' must be a DIClazz instance.\");\n\t\t}\n\t\tif (parseType(height) !== \"number\") {\n\t\t\tthrow new Error(\n\t\t\t\t`DependencyTreeNode 'height' is invalid (type - ${parseType(height)}). Constructor argument 'height' must be a number`,\n\t\t\t);\n\t\t}\n\t\tif (!Array.isArray(deps) || (deps.length && deps.find((d) => !(d instanceof DependencyTreeNode)))) {\n\t\t\tthrow new Error(\n\t\t\t\t\"DependencyTreeNode 'deps' is invalid. Constructor argument 'deps' must be an array of DependencyTreeNode instances.\",\n\t\t\t);\n\t\t}\n\t\tconst { key, name, type, isClass, lifecycle, constructor } = baseClazz;\n\t\tsuper(key, name, type, isClass, lifecycle, constructor);\n\t\tthis.height = height;\n\t\tthis.deps = deps;\n\t}\n}\n\nexport default DependencyTreeNode;\n","import { parseType } from \"../../../ReflectionJs/index.js\";\nimport DependencyTreeNode from \"./DependencyTreeNode.js\";\n\nclass BaseNodeInvalid extends Error {\n\tconstructor() {\n\t\tsuper(\"DependencyTree baseNode arg is invalid. Constructor argument 'baseNode' must be an instance of DependencyTreeNode\");\n\t}\n}\n\n/** Class representing a dependency tree\n * @class\n */\nclass DependencyTree {\n\t/**\n\t * @param {DependencyTreeNode} baseNode\n\t */\n\tconstructor(baseNode) {\n\t\tif (!(baseNode instanceof DependencyTreeNode)) {\n\t\t\tthrow new BaseNodeInvalid();\n\t\t}\n\t\tthis.baseNode = baseNode;\n\t}\n\n\t#getDepsByHeight(height, node = this.baseNode) {\n\t\tconst deps = [];\n\t\tif (node.height < height) {\n\t\t\tnode.deps.forEach((dep) => {\n\t\t\t\tdeps.push(...this.#getDepsByHeight(height, dep));\n\t\t\t});\n\t\t} else if (node.height === height) {\n\t\t\tdeps.push(node);\n\t\t}\n\t\treturn deps;\n\t}\n\n\t/** Returns all deps with specified height\n\t *\n\t * @param {number} height\n\t * @returns {DependencyTreeNode[]}\n\t */\n\tgetDepsByHeight(height) {\n\t\tif (parseType(height) !== \"number\") {\n\t\t\tthrow new Error(\"getDepsByHeight arg 'height' is undefined. Argument 'height' value must be a positive number\");\n\t\t}\n\t\tif (height < 0) {\n\t\t\tthrow new Error(\"getDepsByHeight arg 'height' is a negative number. Argument 'height' value must be a positive number\");\n\t\t}\n\t\treturn this.#getDepsByHeight(height);\n\t}\n\n\t/**\n\t * @typedef {Object} nodesGroupType\n\t * @property {number} height\n\t * @property {DependencyTreeNode[]} deps\n\t */\n\n\t/** Returns nodes grouped by height\n\t *\n\t * @returns {nodesGroupType[]}\n\t */\n\tgroupByHeight() {\n\t\tlet currentHeight = 0;\n\t\tconst groups = [];\n\t\tlet currentDeps = this.getDepsByHeight(currentHeight);\n\t\twhile (currentDeps && currentDeps.length > 0) {\n\t\t\tgroups.push({\n\t\t\t\theight: currentHeight,\n\t\t\t\tdeps: currentDeps,\n\t\t\t});\n\t\t\tcurrentHeight++;\n\t\t\tcurrentDeps = this.getDepsByHeight(currentHeight);\n\t\t}\n\t\treturn groups;\n\t}\n}\n\nexport default DependencyTree;\n","import DIContainer from \"./DIContainer.js\";\nimport DependencyTree from \"./helpers/DependencyTree.js\";\n\n/** Class representing an error thrown when parent container isn't an instance of AbstractDIContainer.\n * @class\n * @extends Error\n */\nclass InvalidDIParent extends Error {\n\tconstructor() {\n\t\tsuper(\"Invalid di parent. Parent must be an instance of AbstractDIContainer or it's derived class, null or undefined.\");\n\t}\n}\n\n/** Class representing an error thrown when DIContainer 'classTreeList' is invalid.\n * @class\n * @extends Error\n */\nclass DIContainerClassTreeListInvalid extends Error {\n\tconstructor() {\n\t\tsuper(\n\t\t\t\"DIContainer constructor's argument 'classTreeList' is invalid. \" +\n\t\t\t\t\"Argument 'classTreeList' must be an array of DependencyTree instances\",\n\t\t);\n\t}\n}\n\n/** Abstract Class AbstractDIContainer\n * @abstract\n * @extends {DIContainer}\n * @property {DependencyTree[]} classTreeList\n */\nclass AbstractDIContainer extends DIContainer {\n\t/**\n\t * @abstract\n\t * @param {AbstractDIContainer} parent - parent container\n\t * @param {DependencyTree[]} [classTreeList=[]] - list of di objects dependency tree\n\t */\n\tconstructor(parent, classTreeList = []) {\n\t\tif (parent !== null && parent !== undefined && !(parent instanceof AbstractDIContainer)) {\n\t\t\tthrow new InvalidDIParent();\n\t\t}\n\t\tif (!Array.isArray(classTreeList) || (classTreeList.length && classTreeList.find((clsTree) => !(clsTree instanceof DependencyTree)))) {\n\t\t\tthrow new DIContainerClassTreeListInvalid();\n\t\t}\n\t\tsuper();\n\t\tthis.classTreeList = classTreeList;\n\t}\n}\n\nexport default AbstractDIContainer;\n","import { parseType } from \"../../../ReflectionJs/index.js\";\nimport {\n\t// InvalidDIObjectName,\n\t// InvalidDIObjectParent,\n\tUnregisteredDIObjectLifecycle,\n} from \"../../DIObjectConfig.js\";\nimport Lifecycle from \"../../lifecycle/Lifecycle.js\";\n// eslint-disable-next-line no-unused-vars\nimport ContextContainer from \"../ContextContainer.js\";\nimport AbstractContextContainer from \"../AbstractContextContainer.js\";\n// import deepEqual from \"../../utils/deepEqual\";\nimport DIObjectKey from \"./DIObjectKey.js\";\nimport LifecycleEnum from \"../../constants/LifecycleEnum.js\";\n\n/** Class represents an error thrown when di object's key isn't unique\n * @class\n * @extends Error\n */\nclass NotUniqueDIObjectKey extends Error {\n\tconstructor({ parent, name, lifecycle, isClass }) {\n\t\tconst message = `DI key with description {\n            parent: ${parent ? parent.name : \"null\"},\n            name: ${name},\n            lifecycle: ${lifecycle.id},\n            isClass: ${isClass}\n        } isn't unique. There is another DI object with this key.`;\n\t\tsuper(message);\n\t\tthis.name = \"NotUniqueDIKey\";\n\t}\n}\n\n/** Class representing factory for di object keys\n * @class\n */\nclass DIObjectKeyFactory {\n\t/**\n\t *\n\t * @param {Map} [keys=new Map()]\n\t */\n\tconstructor(keys = new Map()) {\n\t\tthis.#keys = keys;\n\t}\n\n\t#keys;\n\n\t/** Returns new key string\n\t *\n\t * @param {AbstractContextContainer} parent\n\t * @param {string} name\n\t * @param {Lifecycle} lifecycle\n\t * @param {boolean} isClass\n\t * @returns {string}\n\t */\n\tcreateKey(parent, name, lifecycle, isClass) {\n\t\tthis.#validateKeyParams(parent, name, lifecycle, isClass);\n\t\tconst keyDescription = {\n\t\t\tparent,\n\t\t\tname,\n\t\t\tlifecycle,\n\t\t\tisClass,\n\t\t};\n\t\tconst keyDescriptionStr = this.#stringifyKeyDescription(keyDescription);\n\t\tif (this.#keys.has(keyDescriptionStr)) {\n\t\t\tthrow new NotUniqueDIObjectKey(keyDescription);\n\t\t}\n\t\tconst key = new DIObjectKey(keyDescriptionStr);\n\t\tthis.#keys.set(keyDescriptionStr, key);\n\t\treturn key;\n\t}\n\n\t#stringifyKeyDescription({ parent, name, lifecycle, isClass }) {\n\t\treturn `@${parent?.name}/${name}/${lifecycle.id}/${isClass}`;\n\t}\n\n\t#validateKeyParams(parent, name, lifecycle, isClass) {\n\t\tif (!(parent instanceof AbstractContextContainer)) {\n\t\t\tthrow new Error(\"DIObjectKeyFactory.create() 'parent' arg is invalid. 'parent' must be an instance of AbstractContextContainer\");\n\t\t}\n\t\tif (parseType(name) !== \"string\") {\n\t\t\tthrow new Error(\"DIObjectKeyFactory.create() 'name' arg is invalid. 'name' must be a string.\");\n\t\t}\n\t\tif (name === \"\") {\n\t\t\tthrow new Error(\"DIObjectKeyFactory.create() 'name' arg is empty.\");\n\t\t}\n\t\tif (!(lifecycle instanceof Lifecycle)) {\n\t\t\tthrow new Error(\"DIObjectKeyFactory.create() 'lifecycle' arg is invalid. 'lifecycle' must be an instance of Lifecycle\");\n\t\t}\n\t\tif (!Object.values(LifecycleEnum).find((v) => v === lifecycle.id)) {\n\t\t\tthrow new UnregisteredDIObjectLifecycle(lifecycle);\n\t\t}\n\t\tif (parseType(isClass) !== \"boolean\") {\n\t\t\tthrow new Error(\"DIObjectKeyFactory.create() 'isClass' arg type is invalid. 'isClass' type must be boolean\");\n\t\t}\n\t\treturn true;\n\t}\n}\n\nexport default DIObjectKeyFactory;\n","import DIClazz from \"../../DIClazz.js\";\nimport DependencyTree from \"./DependencyTree.js\";\nimport DependencyTreeNode from \"./DependencyTreeNode.js\";\n\nclass InvalidBaseClazz extends Error {\n\tconstructor() {\n\t\tsuper(\"Argument 'baseClazz' is invalid. 'baseClazz' must be an instance of DIClazz\");\n\t\tthis.name = \"DependencyTreeFactory.createDependencyTree() Error\";\n\t}\n}\n\nclass InvalidAllClasses extends Error {\n\tconstructor() {\n\t\tsuper(\"Argument 'allClasses' is invalid. 'allClasses' must be a not empty array of DIClazz instances\");\n\t\tthis.name = \"DependencyTreeFactory.createDependencyTree() Error\";\n\t}\n}\n\n/** Class representing a factory for dependency trees\n * @class\n */\nclass DependencyTreeFactory {\n\t/** Returns new `DependencyTree` instance\n\t * @static\n\t * @param {DIClazz} baseClazz\n\t * @param {DIClazz[]} allClasses\n\t * @returns {DependencyTree}\n\t */\n\tstatic createDependencyTree(baseClazz, allClasses) {\n\t\tif (!(baseClazz instanceof DIClazz)) {\n\t\t\tthrow new InvalidBaseClazz();\n\t\t}\n\t\tif (\n\t\t\t!Array.isArray(allClasses) ||\n\t\t\t(allClasses.length && allClasses.findIndex((cls) => !(cls instanceof DIClazz)) !== -1) ||\n\t\t\t!allClasses.length\n\t\t) {\n\t\t\tthrow new InvalidAllClasses();\n\t\t}\n\t\tconst baseNode = new DependencyTreeNode(baseClazz, 0, []);\n\t\tDependencyTreeFactory.#buildDependencyTree(baseNode, allClasses);\n\t\treturn new DependencyTree(baseNode);\n\t}\n\n\tstatic #addDependencyToNode(node, dep) {\n\t\tnode.deps.push(dep);\n\t}\n\n\tstatic #buildDependencyTree(node, allClasses) {\n\t\tif (node.constructor.args.length > 0) {\n\t\t\tnode.constructor.args.forEach((arg) => {\n\t\t\t\tconst argClazz = allClasses.find((cls) => cls.name === arg);\n\t\t\t\tconst nextNode = new DependencyTreeNode(argClazz, node.height + 1, []);\n\t\t\t\tDependencyTreeFactory.#addDependencyToNode(node, nextNode);\n\t\t\t\tDependencyTreeFactory.#buildDependencyTree(nextNode, allClasses);\n\t\t\t});\n\t\t} else {\n\t\t\treturn node;\n\t\t}\n\t}\n}\n\nexport default DependencyTreeFactory;\n","import {\n\tgetArgumentDefaultValue,\n\tgetBaseClass,\n\tgetClassConstructorArgsNames,\n\tgetFunctionArgsNames,\n\tparseType,\n} from \"../../ReflectionJs/index.js\";\n// eslint-disable-next-line no-unused-vars\nimport DIClazz from \"../DIClazz.js\";\nimport { DIObjectConfig } from \"../DIObjectConfig.js\";\nimport DependencyLoopError from \"../errors/DependencyLoopError.js\";\nimport InvalidAbstractContextConfig from \"../errors/InvalidAbstractContextConfig.js\";\nimport InvalidDIObjectArgDefaultValue from \"../errors/InvalidDIObjectArgDefaultValue.js\";\nimport InvalidDIObjectArgumentName from \"../errors/InvalidDIObjectArgumentName.js\";\nimport NotAllowedDIObjectType from \"../errors/NotAllowDIObjectType.js\";\nimport AbstractDIContainer from \"./AbstractDIContainer.js\";\nimport DIObjectKeyFactory from \"./helpers/DIObjectKeyFactory.js\";\n// eslint-disable-next-line no-unused-vars\nimport DependencyTree from \"./helpers/DependencyTree.js\";\nimport DependencyTreeFactory from \"./helpers/DependencyTreeFactory.js\";\n// eslint-disable-next-line no-unused-vars\nimport FunctionWrapper from \"../wrappers/FunctionWrapper.js\";\n\n// class DIObjectHasInvalidName extends Error {\n// \tconstructor(name, contextName) {\n// \t\tconst message = `DI Object has invalid name { ${name} }. Rename this DI object in ${contextName} context config.`;\n// \t\tsuper(message);\n// \t\tthis.name = \"DI Object's name is invalid\";\n// \t}\n// }\n\n// class DIObjectHasInvalidLifecycleIdentifier extends Error {\n// \tconstructor(lifecycleId, contextName) {\n// \t\tconst message = `DI Object has invalid lifecycle identifier { ${lifecycleId} }. Change this DI object in ${contextName} context config.`;\n// \t\tsuper(message);\n// \t\tthis.name = \"DI Object's lifecycle identifier is invalid\";\n// \t}\n// }\n\n// class DIConfigHasObjectsWithRepeatedNames extends Error {\n//     constructor(names, contextName) {\n//         const message = `There are DI objects with the same names { ${names.join(', ')} } in ${contextName} context config.`;\n//         super(message);\n//         this.name = \"DI Config has objects with repeated names\";\n//     }\n// }\n\nclass DerivedClassConstructorArgsError extends Error {\n\tconstructor(derivedClassName, baseClassName) {\n\t\tconst message = `The number of constructor arguments in the derived class ${derivedClassName} must be >= than the number of\n            constructor arguments of its base class ${baseClassName}.`;\n\t\tsuper(message);\n\t\tthis.name = \"Derived class constructor args count error\";\n\t}\n}\n\n/** Class representing an error thrown when child of di context isn't an instance of AbstractContextContainer.\n * @class\n * @extends Error\n */\nclass InvalidContextChild extends Error {\n\tconstructor() {\n\t\tsuper(\"Invalid context child. Child must be an instance of AbstractContextContainer or it's derived class, null or undefined.\");\n\t}\n}\n\n/** Abstract Class for context - AbstractContextContainer. It takes config and generates dependency trees, validate it, create\n * @class\n * @abstract\n * @extends AbstractDIContainer\n *\n * @property {DependencyTree[]} classTreeList - list of di objects dependency tree.\n * @property {Map} scopes - Map of Simple DI Containers, like SingletoneContainer, SessionContainer, DemandedFactory.\n//  *\n//  * @property {boolean} contextReady - Is context ready for work?\n//  * @private\n//  *\n//  * @property {DIClazz[]} clazzes - List of DIObjectClazz.\n//  * @private\n//  *\n//  * @property {Map<AbstractContextContainer>} - Map of AbstractContextContainer.\n//  * @private\n */\nclass AbstractContextContainer extends AbstractDIContainer {\n\t/**\n\t * @param {DIObjectConfig[]} [config=[]] - list of di objects configs\n\t * @param {string} [name=\"\"] - name of context\n\t * @param {AbstractDIContainer} [parent=null] - parent context\n\t * @param {DIObjectKeyFactory} [keyFactory=new DIObjectKeyFactory()] - Keys Factory\n\t */\n\tconstructor(config = [], name = \"\", parent = null, keyFactory = new DIObjectKeyFactory()) {\n\t\tsuper(parent, []);\n\t\tthis.config = config;\n\t\tthis.name = name;\n\t\tthis.#keyFactory = keyFactory;\n\t}\n\n\t#contextReady = false;\n\n\t#parent;\n\t#keyFactory;\n\t#clazzes = [];\n\t#children = new Map();\n\n\tclassTreeList = [];\n\n\tscopes = new Map();\n\n\t/** Init context container: validate config, define classTreeList, create and init scopes and children.\n\t * @public\n\t */\n\tinit() {\n\t\t// this.#validateDIConfig();\n\t\tif (this.#contextReady) return;\n\t\tthis.classTreeList = [];\n\t\tthis.#initClazzes();\n\t\tthis.#validateObjectsArgsNames();\n\t\tthis.#validateDependencyGraph();\n\t\tthis.#initClassTreeList();\n\t\tthis.classTreeList.sort((a, b) => {\n\t\t\treturn a.baseNode.constructor.args.length - b.baseNode.constructor.args.length;\n\t\t});\n\t\tthis._createScopes();\n\t\tthis._initScopes();\n\t\tthis.#children.forEach((child) => {\n\t\t\tif (child.init) {\n\t\t\t\tchild.init();\n\t\t\t}\n\t\t});\n\t\tthis.#contextReady = true;\n\t}\n\n\t/** Init clazzes\n\t * @private\n\t */\n\t#initClazzes() {\n\t\tthis.#clazzes = this.config.map(this.#diClazzFromDIObjectConfig.bind(this));\n\t}\n\n\t/** Returns DIClazz created from DIObjectConfig\n\t * @private\n\t *\n\t * @param {DIObjectConfig} containerObject - config of di object like SingletoneConfig, SessionConfig or DemandedConfig\n\t * @returns {DIClazz}\n\t */\n\t#diClazzFromDIObjectConfig(containerObject) {\n\t\tconst objName = typeof containerObject.name === \"symbol\" ? Symbol.keyFor(containerObject.name) : containerObject.name;\n\t\tconst typeOfContainerObject = parseType(containerObject.type);\n\t\tif (typeOfContainerObject !== \"class\" && typeOfContainerObject !== \"function\" && typeOfContainerObject !== \"function class\") {\n\t\t\tthrow new NotAllowedDIObjectType(containerObject.type);\n\t\t}\n\t\tconst isClass = typeOfContainerObject === \"class\" || typeOfContainerObject === \"function class\";\n\t\tconst constructorArgs =\n\t\t\ttypeOfContainerObject === \"class\"\n\t\t\t\t? { args: getClassConstructorArgsNames(containerObject.type).args }\n\t\t\t\t: { args: getFunctionArgsNames(containerObject.type).args };\n\t\tconst constructor = {\n\t\t\t...constructorArgs,\n\t\t\targs: constructorArgs.args.map((arg) => {\n\t\t\t\tconst defaultValue = getArgumentDefaultValue(arg);\n\t\t\t\tif (defaultValue && defaultValue.value) {\n\t\t\t\t\tconst obj = this.config.find((cls) => cls.type.name === defaultValue.value);\n\t\t\t\t\tif (!obj) {\n\t\t\t\t\t\tthrow new InvalidDIObjectArgDefaultValue(containerObject.name, defaultValue.name, defaultValue.value);\n\t\t\t\t\t}\n\t\t\t\t\treturn typeof obj.name === \"symbol\" ? Symbol.keyFor(obj.name) : obj.name;\n\t\t\t\t}\n\t\t\t\treturn arg;\n\t\t\t}),\n\t\t};\n\t\treturn new DIClazz(\n\t\t\tthis.#keyFactory.createKey(this, objName, containerObject.lifecycle, isClass),\n\t\t\tobjName,\n\t\t\tcontainerObject.type,\n\t\t\tisClass,\n\t\t\tcontainerObject.lifecycle,\n\t\t\tconstructor,\n\t\t);\n\t\t// ToDo   \n\t}\n\n\t/** Add new di object to existed context\n\t * @param {DIObjectConfig} diObjectConfig - config of new di object\n\t * @example <caption>Usage of addDIObject.</caption>\n\t * // returns tree\n\t * context.addDIObject(SingletoneConfig(...));\n\t * @returns {DependencyTree}\n\t */\n\taddDIObject(diObjectConfig) {\n\t\tif (!(diObjectConfig instanceof DIObjectConfig)) {\n\t\t\tthrow new InvalidAbstractContextConfig();\n\t\t}\n\t\tthis.config.push(diObjectConfig);\n\t\tconst diObjectClazz = this.#diClazzFromDIObjectConfig(diObjectConfig);\n\t\tthis.#clazzes.push(diObjectClazz);\n\t\tconst tree = DependencyTreeFactory.createDependencyTree(diObjectClazz, this.#clazzes);\n\t\tthis.classTreeList.push(tree);\n\t\treturn tree;\n\t}\n\n\t/** Init classTreeList prop with DependencyTreeFactory\n\t * @private\n\t */\n\t#initClassTreeList() {\n\t\tthis.classTreeList = this.#clazzes.map((clazz) => DependencyTreeFactory.createDependencyTree(clazz, this.#clazzes));\n\t}\n\n\t/** Create and add scopes to AbstractContextContainer.#scopes\n\t * @protected\n\t */\n\t_createScopes() {}\n\n\t/**\n\t * @protected\n\t */\n\t_initScopes() {}\n\n\t/** Returns `true` if context has an instance of di object with specified name.\n\t * @public\n\t * @param {string} name - name of di object from this context\n\t * @returns {boolean}\n\t */\n\t// eslint-disable-next-line no-unused-vars\n\thasInstance(name) {}\n\n\t/** Get an instance of di object with specified name and lifecycleId.\n\t * @public\n\t * @param {string|symbol|Function} name - name of di object from this context\n\t * @param {number} [lifecycleId] - id of Lifecycle\n\t * @returns {Object|FunctionWrapper|undefined}\n\t */\n\t// eslint-disable-next-line no-unused-vars\n\tgetInstance(name, lifecycleId) {}\n\n\t/** Find dependency tree by name and lifecycle id of di object.\n\t * @protected\n\t * @param {string|symbol|Function} name - name of di object\n\t * @param {number} [lifecycleId] - di object lifecycle id\n\t * @returns {DependencyTree|undefined}\n\t */\n\t_findClassTree(name, lifecycleId) {\n\t\tlet findCallback;\n\t\tswitch (typeof name) {\n\t\t\tcase \"string\":\n\t\t\t\tfindCallback = (cls) => cls.baseNode.name === name;\n\t\t\t\tbreak;\n\t\t\tcase \"symbol\":\n\t\t\t\tfindCallback = (cls) => cls.baseNode.name === Symbol.keyFor(name);\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tfindCallback = (cls) => cls.baseNode.type.name === name.name;\n\t\t\t\tbreak;\n\t\t}\n\t\tlet clazz;\n\t\tif (lifecycleId !== undefined) {\n\t\t\tclazz = [...this.classTreeList].filter((cls) => cls.baseNode.lifecycle.id === lifecycleId).find(findCallback);\n\t\t} else {\n\t\t\t// find first class by key in order from Persistent to Demanded\n\t\t\tclazz = [...this.classTreeList].sort((a, b) => a.baseNode.lifecycle.id - b.baseNode.lifecycle.id).find(findCallback);\n\t\t}\n\t\tif (!clazz) {\n\t\t\treturn undefined;\n\t\t\t// throw new HasNoDIObjectWithKey(typeof name !== 'string' ? name.name : name, this.name);\n\t\t}\n\t\treturn clazz;\n\t}\n\n\t/** Returns `true` if type of di object with specified key is the same as 'type' argument.\n\t * @abstract\n\t * @param {string|symbol} key - 'key' of di object\n\t * @param {any} type - type of di object\n\t * @returns {boolean}\n\t */\n\t// eslint-disable-next-line no-unused-vars\n\ttypeMatch(key, type) {\n\t\t// is DI object with key instance of type\n\t}\n\n\t/** Get parent DIContainer.\n\t * @public\n\t * @returns {AbstractContextContainer|null}\n\t */\n\tgetParent() {\n\t\treturn this.#parent;\n\t}\n\n\t/** Set parent of this context and add this context as a child to parent.\n\t * @public\n\t * @param {AbstractContextContainer} parent\n\t */\n\tsetParent(parent) {\n\t\tif (parent instanceof AbstractContextContainer) {\n\t\t\tif (parent.getChildren().has(this.name)) {\n\t\t\t\tthrow new Error(\"Parent already has this context as a child.\");\n\t\t\t}\n\t\t\tthis.#parent = parent;\n\t\t\tparent.addChild(this);\n\t\t}\n\t}\n\n\t/** Removes reference to parent.\n\t * @protected\n\t */\n\t_removeParent() {\n\t\tthis.#parent = null;\n\t}\n\n\t/** Get di object instance from child context.\n\t * @protected\n\t * @param {string|symbol|Function} name - name of di object from this context\n\t * @param {number} [lifecycleId] - id of Lifecycle\n\t * @returns {Object|FunctionWrapper|undefined}\n\t */\n\t_getChildInstance(name, lifecycleId) {\n\t\tlet instance;\n\t\tconst childContext = [...this.#children.values()].find((context) => {\n\t\t\tinstance = context.getInstance(name, lifecycleId);\n\t\t\treturn instance !== undefined;\n\t\t});\n\t\treturn childContext ? instance : undefined;\n\t}\n\n\t/** Get children of context.\n\t * @public\n\t * @returns {Map<string, AbstractContextContainer>}\n\t */\n\tgetChildren() {\n\t\treturn this.#children;\n\t}\n\n\t/** Add child context.\n\t * @public\n\t * @param {AbstractContextContainer} childContext\n\t */\n\taddChild(childContext) {\n\t\tif (!(childContext instanceof AbstractContextContainer)) {\n\t\t\tthrow new InvalidContextChild();\n\t\t}\n\t\tthis.#children.set(childContext.name, childContext);\n\t}\n\n\t/** Removes child context by it's name.\n\t * @public\n\t * @param {string} childName - name of child context\n\t */\n\tdeleteChild(childName) {\n\t\tif (!this.#children.has(childName)) {\n\t\t\treturn;\n\t\t}\n\t\tthis.#children.get(childName)._removeParent();\n\t\tthis.#children.delete(childName);\n\t}\n\n\t/** Get scope by lifecycle id.\n\t * @abstract\n\t */\n\t// eslint-disable-next-line no-unused-vars\n\tgetScope(lifecycleId) {}\n\n\t/** Filter dependency tree list by lifecycle id.\n\t * @public\n\t * @param {number} lifecycleId\n\t * @returns {DependencyTree[]}\n\t */\n\tfilterClassesByLifecycle(lifecycleId) {\n\t\treturn this.classTreeList.filter((cls) => cls.baseNode.lifecycle.id === lifecycleId);\n\t}\n\n\t// eslint-disable-next-line no-unused-vars\n\t#validateDIConfig(config) {\n\t\t// Check if there are objects with invalid name\n\t\t// !name !== true || typeof name === 'string'\n\t\t// if (!Array.isArray(config) || config.find(c => !(c instanceof DIObjectConfig))) {\n\t\t//     throw new InvalidContextConfig();\n\t\t// }\n\t\t// const objectWithInvalidName = config.find(({ name }) => !name === true || !(typeof name === 'string' || typeof name === 'symbol'));\n\t\t// if (objectWithInvalidName) {\n\t\t//     throw new DIObjectHasInvalidName(objectWithInvalidName.name, this.name);\n\t\t// }\n\t\t// Accept repeated names *, if these objects have other lifecycle\n\t\t// Check if there are objects with the same names\n\t\t// const configSet = new Set(this.config.map((objectConfig) => objectConfig.name));\n\t\t// if (this.config.length !== configSet.size) {\n\t\t//     const objectsByNames = Object.fromEntries(Array.from(configSet.values()).map(key => ([\n\t\t//         key,\n\t\t//         this.config.filter((objectConfig) => objectConfig.name === key),\n\t\t//     ])));\n\t\t//     const objectsWithRepeatedNames = Object.entries(objectsByNames).filter(([name, items]) => items.length > 1);\n\t\t//     throw new DIConfigHasObjectsWithRepeatedNames(objectsWithRepeatedNames.map(obj => obj[0]), this.name);\n\t\t// }\n\t\t// Check object lifecycle\n\t\t// Change this conditions after Lifecycle class will be defined.\n\t\t// lifecycle prop must be an instance of Lifecycle (it's checked in DIObjectConfig constructor)\n\t\t// !!! now we don't need to registrate id in LifecycleEnum, because it's done in Lifecycle's constructor\n\t\t// const objectWithInvalidLifecycle = this.config.find(({ lifecycle }) => {\n\t\t//     return !(lifecycle instanceof Lifecycle)\n\t\t//         || !Object.values(LifecycleEnum).find(v => v === lifecycle.id);\n\t\t// });\n\t\t// if (objectWithInvalidLifecycle) {\n\t\t//     throw new DIObjectHasInvalidLifecycleIdentifier(objectWithInvalidLifecycle.lifecycle.id, this.name);\n\t\t// }\n\t\t// Check Inheritance Hierarchy\n\t\t// this.config.forEach((clazz) => this.#validateInheritanceHierarchy(clazz.type));\n\t}\n\n\t#validateObjectsArgsNames() {\n\t\tconst argsSet = new Set();\n\t\tthis.#clazzes.forEach((cls) =>\n\t\t\tcls.constructor.args.forEach((arg) =>\n\t\t\t\targsSet.add({\n\t\t\t\t\tname: arg,\n\t\t\t\t\tplace: cls.name,\n\t\t\t\t}),\n\t\t\t),\n\t\t);\n\t\targsSet.forEach((arg) => {\n\t\t\tconst cls = this.#clazzes.find((elem) => elem.name === arg.name);\n\t\t\tif (cls === undefined) {\n\t\t\t\tthrow new InvalidDIObjectArgumentName(arg.place, arg.name);\n\t\t\t}\n\t\t});\n\t}\n\n\t#validateInheritanceHierarchy(clazz) {\n\t\t// check inheritance existence\n\t\t// if base class exist and it is not an Object Class,\n\t\t//    check if base class is a part of this di context\n\t\t//      check if constructor arguments count <= derived class constructor args count and return to beggining,\n\t\t//\t\t\totherwise throw an exception\n\t\t// else return true\n\t\tif (parseType(clazz) !== \"class\") return true;\n\t\tconst baseClass = getBaseClass(clazz);\n\t\tconst isAnotherDIObject = this.config.findIndex((objConfig) => objConfig.type.name === baseClass.name) !== -1;\n\t\tif (baseClass.name !== \"Object\") {\n\t\t\tif (isAnotherDIObject) {\n\t\t\t\tconst clsConstructorArgs = getClassConstructorArgsNames(clazz).args;\n\t\t\t\tconst baseClsConstructorArgs = getClassConstructorArgsNames(baseClass).args;\n\t\t\t\tif (clsConstructorArgs.length < baseClsConstructorArgs.length) {\n\t\t\t\t\tthrow new DerivedClassConstructorArgsError(clazz.name, baseClass.name);\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn this.#validateInheritanceHierarchy(baseClass);\n\t\t} else {\n\t\t\treturn true;\n\t\t}\n\t}\n\n\t#validateDependencyGraph() {\n\t\tthis.#clazzes.forEach((cls) => {\n\t\t\tcls.constructor.args.forEach((arg) => {\n\t\t\t\tthis.#findDependencyLoop([cls.name, arg], arg);\n\t\t\t});\n\t\t});\n\t\treturn true;\n\t}\n\n\t#findDependencyLoop(depsList = [], argName) {\n\t\tif (this.#clazzes.length === 0) return;\n\t\tif (argName === undefined) argName = this.#clazzes[0].name;\n\t\tconst cls = this.#clazzes.find((cls) => cls.name === argName);\n\t\tcls.constructor.args.forEach((elem) => {\n\t\t\tif (depsList.includes(elem)) {\n\t\t\t\tthrow new DependencyLoopError(elem, cls.name);\n\t\t\t} else {\n\t\t\t\tthis.#findDependencyLoop([...depsList, elem], elem);\n\t\t\t}\n\t\t});\n\t}\n}\n\nexport default AbstractContextContainer;\n","class ContainerHasClassWithInvalidLifecycle extends Error {\n\tconstructor(containerScope, clazz) {\n\t\tconst message = `${containerScope}Container's classTreeList arg has class { ${clazz.name} } with another lifecycle.`;\n\t\tsuper(message);\n\t\tthis.name = \"DI Container has class with invalid lifecycle type\";\n\t}\n}\n\nexport default ContainerHasClassWithInvalidLifecycle;\n","/** Class representing a function that's a di object\n * @class\n * @template {Function} T\n */\nclass FunctionWrapper {\n\t/**\n\t * @param {T} func\n\t * @param {any} args - arguments of `func`\n\t */\n\tconstructor(func, args) {\n\t\tthis.func = func;\n\t\tthis.args = args;\n\t\tthis.call.bind(this);\n\t}\n\n\t/** Calls `func`\n\t *\n\t * @returns {any}\n\t */\n\tcall = function () {\n\t\tif (new.target) {\n\t\t\treturn new this.func(...this.args);\n\t\t}\n\t\treturn this.func(...this.args);\n\t};\n}\n\nexport default FunctionWrapper;\n","import FunctionWrapper from \"../../wrappers/FunctionWrapper.js\";\n// eslint-disable-next-line no-unused-vars\nimport DependencyTreeNode from \"./DependencyTreeNode.js\";\n\n/** Supporting class for instances */\nclass InstanceHelper {\n\t/**\n\t * @static\n\t * @param {DependencyTreeNode} clazzTreeNode\n\t * @param {any} argumentValues\n\t * @returns {Object|FunctionWrapper}\n\t */\n\tstatic createInstance(clazzTreeNode, argumentValues) {\n\t\tif (clazzTreeNode.isClass) {\n\t\t\treturn new clazzTreeNode.type(...argumentValues);\n\t\t} else {\n\t\t\treturn new FunctionWrapper(clazzTreeNode.type, argumentValues);\n\t\t}\n\t}\n}\n\nexport default InstanceHelper;\n","// eslint-disable-next-line no-unused-vars\nimport FunctionWrapper from \"../wrappers/FunctionWrapper.js\";\nimport AbstractContextContainer from \"./AbstractContextContainer.js\";\nimport AbstractDIContainer from \"./AbstractDIContainer.js\";\n// eslint-disable-next-line no-unused-vars\nimport DependencyTree from \"./helpers/DependencyTree.js\";\nimport InstanceHelper from \"./helpers/InstanceHelper.js\";\n\nclass InvalidSimpleContainerParent extends Error {\n\tconstructor() {\n\t\tsuper(\n\t\t\t\"Invalid simple container parent. Parent must be an instance of AbstractContextContainer or it's derived class, null or undefined.\",\n\t\t);\n\t}\n}\n\n/** Abstract Class representing a standard DI container (storage+factory)\n * @class\n * @abstract\n * @extends AbstractDIContainer\n */\nclass SimpleContainer extends AbstractDIContainer {\n\t/**\n\t *\n\t * @param {AbstractContextContainer} parent - parent container\n\t * @param {DependencyTree[]} [classTreeList=[]] - list of di objects dependency tree\n\t */\n\tconstructor(parent, classTreeList = []) {\n\t\tif (!(parent instanceof AbstractContextContainer)) {\n\t\t\tthrow new InvalidSimpleContainerParent();\n\t\t}\n\t\tsuper(parent, classTreeList);\n\t}\n\n\t/** Returns new instance of di object.\n\t * @protected\n\t * @param {*} clazzTree\n\t * @returns {Object|FunctionWrapper}\n\t */\n\t_buildInstance(clazzTree) {\n\t\t// create new instance and add it in Map\n\t\t// works\n\t\t// const groups = clazzTree.groupByHeight().reverse();\n\t\t// for (let i = 0; i < groups.length; i++) {\n\t\t//     for (let j = 0; j < groups[i].deps.length; j++) {\n\t\t//         const clazz = groups[i].deps[j];\n\t\t//         const argumentValues = [];\n\t\t//         clazz.deps.forEach((dependency) => {\n\t\t//             if (dependency.lifecycle.id !== LifecycleEnum.Demanded) {\n\t\t//                 argumentValues.push(this.getInstance(dependency.name) || this.getParent().getInstance(dependency.name));\n\t\t//             } else {\n\t\t//                 argumentValues.push(this.getParent().getInstance(dependency.name, dependency.lifecycle.id, true));\n\t\t//             }\n\t\t//         });\n\t\t//         if (clazz.lifecycle.id !== LifecycleEnum.Demanded) {\n\t\t//             const instance = InstanceHelper.createInstance(groups[i].deps[j], argumentValues);\n\t\t//             if (clazzTree.baseNode.lifecycle.id !== groups[i].deps[j].lifecycle.id) {\n\t\t//                 this.getParent().getScope(groups[i].deps[j].lifecycle.id)._addInstance(groups[i].deps[j].key, instance);\n\t\t//             } else {\n\t\t//                 this._addInstance(groups[i].deps[j].key, instance);\n\t\t//             }\n\t\t//         }\n\t\t//     }\n\t\t// }\n\t\t// return this.getInstance(clazzTree.baseNode.name);\n\n\t\tconst argumentValues = [];\n\t\tif (clazzTree.baseNode.constructor.args.length > 0) {\n\t\t\tclazzTree.baseNode.constructor.args.forEach((arg) => {\n\t\t\t\tconst argClazz = this.getParent().classTreeList.find((clsTree) => clsTree.baseNode.name === arg);\n\t\t\t\tconst existedInstance =\n\t\t\t\t\tthis.getInstance(argClazz.baseNode.key) ||\n\t\t\t\t\tthis.getParent().getInstance(argClazz.baseNode.name, argClazz.baseNode.lifecycle.id, true);\n\t\t\t\tif (existedInstance) {\n\t\t\t\t\treturn argumentValues.push(existedInstance);\n\t\t\t\t}\n\t\t\t\targumentValues.push(this._buildInstance(argClazz));\n\t\t\t});\n\t\t}\n\t\tconst instance = InstanceHelper.createInstance(clazzTree.baseNode, argumentValues);\n\t\tthis._addInstance(clazzTree.baseNode.key, instance);\n\t\treturn instance;\n\t}\n\n\t/**\n\t * @protected\n\t */\n\t_addInstance() {}\n\n\t/** Push new di object in `classTreeList`\n\t * @public\n\t * @param {DependencyTree} diObjectClazzTree\n\t */\n\taddDIObject(diObjectClazzTree) {\n\t\tthis.classTreeList.push(diObjectClazzTree);\n\t}\n}\n\nexport default SimpleContainer;\n","const deepEqual = function (x, y) {\n\tif (x === y) {\n\t\treturn true;\n\t} else if (typeof x === \"object\" && x != null && typeof y === \"object\" && y != null) {\n\t\tif (Object.keys(x).length !== Object.keys(y).length) return false;\n\n\t\tfor (let prop in x) {\n\t\t\tif (y.hasOwnProperty(prop)) {\n\t\t\t\tif (!deepEqual(x[prop], y[prop])) return false;\n\t\t\t} else return false;\n\t\t}\n\n\t\treturn true;\n\t} else return false;\n};\n\nexport default deepEqual;\n","import deepEqual from \"../../utils/deepEqual.js\";\n\nclass InstancesMap extends Map {\n\tconstructor() {\n\t\tsuper();\n\t}\n\n\tget(symbolKey) {\n\t\tif (typeof symbolKey === \"object\" || typeof symbolKey === \"symbol\") {\n\t\t\tlet instance = undefined;\n\t\t\tthis.forEach((value, key) => {\n\t\t\t\tconst elemKey = typeof key === \"symbol\" ? Symbol.keyFor(key) : key;\n\t\t\t\tconst k = typeof symbolKey === \"symbol\" ? Symbol.keyFor(symbolKey) : symbolKey;\n\t\t\t\tif (deepEqual(elemKey, k)) {\n\t\t\t\t\tinstance = value;\n\t\t\t\t}\n\t\t\t});\n\t\t\treturn instance;\n\t\t}\n\t\treturn super.get(symbolKey);\n\t}\n\n\thas(symbolKey) {\n\t\tif (typeof symbolKey === \"object\" || typeof symbolKey === \"symbol\") {\n\t\t\tlet isExist = false;\n\t\t\tthis.forEach((value, key) => {\n\t\t\t\tconst elemKey = typeof key === \"symbol\" ? Symbol.keyFor(key) : key;\n\t\t\t\tconst k = typeof symbolKey === \"symbol\" ? Symbol.keyFor(symbolKey) : symbolKey;\n\t\t\t\tif (deepEqual(elemKey, k)) {\n\t\t\t\t\tisExist = true;\n\t\t\t\t}\n\t\t\t});\n\t\t\treturn isExist;\n\t\t}\n\t\treturn super.has(symbolKey);\n\t}\n}\n\nexport default InstancesMap;\n","import LifecycleEnum from \"../constants/LifecycleEnum.js\";\nimport ContainerHasClassWithInvalidLifecycle from \"../errors/ContainerHasClassWithInvalidLifecycle.js\";\n// eslint-disable-next-line no-unused-vars\nimport FunctionWrapper from \"../wrappers/FunctionWrapper.js\";\n// eslint-disable-next-line no-unused-vars\nimport ContextContainer from \"./ContextContainer.js\";\nimport SimpleContainer from \"./SimpleContainer.js\";\nimport DIObjectKey from \"./helpers/DIObjectKey.js\";\nimport InstancesMap from \"./helpers/InstancesMap.js\";\n\n/** Class representing simple DI container with session lifecycle\n * @class\n * @extends SimpleContainer\n */\nclass SessionContainer extends SimpleContainer {\n\t/**\n\t *\n\t * @param {AbstractContextContainer} parent - parent container\n\t * @param {DependencyTree[]} [classTreeList=[]] - list of di objects dependency tree\n\t */\n\tconstructor(parent, classTreeList = []) {\n\t\tsuper(parent, classTreeList);\n\t\tconst classWithInvalidLifecycle = classTreeList.find((cls) => cls.baseNode.lifecycle.id !== LifecycleEnum.Session);\n\t\tif (classWithInvalidLifecycle) {\n\t\t\tthrow new ContainerHasClassWithInvalidLifecycle(\"Session\", classWithInvalidLifecycle);\n\t\t}\n\t\tthis.#parent = parent;\n\t\t// this.#init();\n\t}\n\n\t#isReady = false;\n\t#parent;\n\t#instances = new InstancesMap();\n\n\t/** Creates instance of each di object in this container\n\t * @public\n\t */\n\tinit() {\n\t\t// ToDo logs\n\t\tif (this.#isReady) return;\n\t\tthis.classTreeList.forEach((cls) => {\n\t\t\t// if (this.#instances.has(cls.baseNode.key.key)) {\n\t\t\t//     return;\n\t\t\t// }\n\t\t\tif (this.#instances.has(cls.baseNode.key.key)) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tthis.#buildInstance(cls);\n\t\t});\n\t\tthis.#isReady = true;\n\t}\n\n\t/** Adds new di object\n\t * @public\n\t * @param {DependencyTree} diObjectClazzTree\n\t */\n\taddDIObject(diObjectClazzTree) {\n\t\tif (diObjectClazzTree.baseNode.lifecycle.id !== LifecycleEnum.Session) {\n\t\t\tthrow new ContainerHasClassWithInvalidLifecycle(\"Session\", diObjectClazzTree);\n\t\t}\n\t\tsuper.addDIObject(diObjectClazzTree);\n\t\tthis.init();\n\t}\n\n\t#buildInstance(clazz) {\n\t\tclazz.baseNode.lifecycle.beforeCreate();\n\t\tconst instance = this._buildInstance(clazz);\n\t\tclazz.baseNode.lifecycle.afterCreate.bind(instance)();\n\t\treturn instance;\n\t}\n\n\t/** Adds instance to instancesMap\n\t * @protected\n\t * @param {DIObjectKey} key\n\t * @param {Object|FunctionWrapper} instance\n\t */\n\t_addInstance(key, instance) {\n\t\t// check that key is valid (there is a classTree node with that key)\n\t\tif (!(key instanceof DIObjectKey)) {\n\t\t\tthrow new Error(`Invalid key type. Argument 'key' must be an instance of DIObjectKey class.`);\n\t\t}\n\t\t// delete this rule, because we need to access adding instance from outside\n\t\tif (\n\t\t\t!this.classTreeList.find((clsTree) => {\n\t\t\t\t// console.log(clsTree.baseNode.key, key);\n\t\t\t\treturn clsTree.baseNode.key.key === key.key;\n\t\t\t})\n\t\t) {\n\t\t\tthrow new Error(`ClassTree with key ${key.key} in '${this.getParent().name}/SessionContainer' not found.`);\n\t\t}\n\t\tthis.#instances.set(key.key, instance);\n\t}\n\n\t/** Returns boolean indicating whether an element with the specified key exists or not.\n\t *\n\t * @param {DIObjectKey} key\n\t * @returns {boolean}\n\t */\n\thasInstance(key) {\n\t\tif (!this.#isReady) return false;\n\t\tif (!(key instanceof DIObjectKey)) {\n\t\t\tthrow new Error(`Invalid argument 'key'. Argument 'key' must be an instance of DIObjectKey.`);\n\t\t}\n\t\treturn this.#instances.has(key.key);\n\t}\n\n\t/**\n\t *\n\t * @param {DIObjectKey} key\n\t * @returns {Object|FunctionWrapper}\n\t */\n\tgetInstance(key) {\n\t\t// return this.#instances.get(key.key);\n\t\tif (!this.#isReady) return undefined;\n\t\treturn this.#instances.get(key.key);\n\t}\n\n\t/** Returns context that's a parent container of this SessionContainer\n\t *\n\t * @returns {ContextContainer}\n\t */\n\tgetParent() {\n\t\treturn this.#parent;\n\t}\n}\n\nexport default SessionContainer;\n","import LifecycleEnum from \"../constants/LifecycleEnum.js\";\nimport ContainerHasClassWithInvalidLifecycle from \"../errors/ContainerHasClassWithInvalidLifecycle.js\";\nimport SimpleContainer from \"./SimpleContainer.js\";\nimport DIObjectKey from \"./helpers/DIObjectKey.js\";\nimport InstancesMap from \"./helpers/InstancesMap.js\";\n\n/** Class representing simple DI container with singletone lifecycle\n * @class\n * @extends SimpleContainer\n */\nclass SingletoneContainer extends SimpleContainer {\n\t/**\n\t *\n\t * @param {AbstractContextContainer} parent - parent container\n\t * @param {DependencyTree[]} [classTreeList=[]] - list of di objects dependency tree\n\t */\n\tconstructor(parent, classTreeList = []) {\n\t\tsuper(parent, classTreeList);\n\t\tconst classWithInvalidLifecycle = classTreeList.find((cls) => cls.baseNode.lifecycle.id !== LifecycleEnum.Singletone);\n\t\tif (classWithInvalidLifecycle) {\n\t\t\tthrow new ContainerHasClassWithInvalidLifecycle(\"Singletone\", classWithInvalidLifecycle);\n\t\t}\n\t\tthis.#parent = parent;\n\t}\n\n\t#parent;\n\t#instances = new InstancesMap();\n\n\t/** Adds new di object\n\t * @public\n\t * @param {DependencyTree} diObjectClazzTree\n\t */\n\taddDIObject(diObjectClazzTree) {\n\t\tif (diObjectClazzTree.baseNode.lifecycle.id !== LifecycleEnum.Singletone) {\n\t\t\tthrow new ContainerHasClassWithInvalidLifecycle(\"Singletone\", diObjectClazzTree);\n\t\t}\n\t\tsuper.addDIObject(diObjectClazzTree);\n\t}\n\n\t#buildInstance(clazz) {\n\t\tclazz.baseNode.lifecycle.beforeCreate();\n\t\tconst instance = this._buildInstance(clazz);\n\t\tclazz.baseNode.lifecycle.afterCreate.bind(instance)();\n\t\treturn instance;\n\t}\n\n\t/** Adds instance to instancesMap\n\t * @protected\n\t * @param {DIObjectKey} key\n\t * @param {Object|FunctionWrapper} instance\n\t */\n\t_addInstance(key, instance) {\n\t\t// check that key is valid (there is a classTree node with that key)\n\t\tif (!(key instanceof DIObjectKey)) {\n\t\t\tthrow new Error(`Invalid key type. Argument 'key' must be an instance of DIObjectKey class.`);\n\t\t}\n\t\t// delete this rule, because we need to access adding instance from outside\n\t\t// don't delete this rule, because we don't need to do ServiceLocator\n\t\tif (\n\t\t\t!this.classTreeList.find((clsTree) => {\n\t\t\t\t// console.log(clsTree.baseNode.key, key);\n\t\t\t\treturn clsTree.baseNode.key.key === key.key;\n\t\t\t})\n\t\t) {\n\t\t\tthrow new Error(`ClassTree with key ${key.key} in '${this.getParent().name}/SingletoneContainer' not found.`);\n\t\t}\n\t\tthis.#instances.set(key.key, instance);\n\t}\n\n\t/** Returns boolean indicating whether an element with the specified key exists or not.\n\t *\n\t * @param {DIObjectKey} key\n\t * @returns {boolean}\n\t */\n\thasInstance(key) {\n\t\treturn this.#instances.has(key.key);\n\t}\n\n\t/**\n\t *\n\t * @param {DIObjectKey} key\n\t * @returns {Object|FunctionWrapper}\n\t */\n\tgetInstance(key) {\n\t\t// const existed = this.#instances.get(key.key);\n\t\tconst existed = this.#instances.get(key.key);\n\t\tif (existed) {\n\t\t\treturn existed;\n\t\t}\n\t\t// const clazz = this.classTreeList.find(cls => deepEqual(Symbol.keyFor(cls.baseNode.key.key), Symbol.keyFor(key.key)));\n\t\tconst clazz = this.classTreeList.find((cls) => cls.baseNode.key.key === key.key);\n\t\tif (!clazz) {\n\t\t\treturn undefined;\n\t\t}\n\t\treturn this.#buildInstance(clazz);\n\t}\n\n\t/** Returns context that's a parent container of this SessionContainer\n\t *\n\t * @returns {ContextContainer}\n\t */\n\tgetParent() {\n\t\treturn this.#parent;\n\t}\n}\n\nexport default SingletoneContainer;\n","import LifecycleEnum from \"../constants/LifecycleEnum.js\";\nimport ContainerHasClassWithInvalidLifecycle from \"../errors/ContainerHasClassWithInvalidLifecycle.js\";\n// eslint-disable-next-line no-unused-vars\nimport FunctionWrapper from \"../wrappers/FunctionWrapper.js\";\n// import deepEqual from \"../utils/deepEqual.js\";\nimport AbstractContextContainer from \"./AbstractContextContainer.js\";\nimport DependencyTree from \"./helpers/DependencyTree.js\";\n// eslint-disable-next-line no-unused-vars\nimport DIObjectKey from \"./helpers/DIObjectKey.js\";\nimport InstanceHelper from \"./helpers/InstanceHelper.js\";\n\nclass InvalidDemandedFactoryParent extends Error {\n\tconstructor() {\n\t\tsuper(\n\t\t\t\"Invalid demanded factory parent. \" +\n\t\t\t\t\"Parent must be an instance of AbstractContextContainer or it's derived class, null or undefined.\",\n\t\t);\n\t}\n}\n\nclass DemandedFactoryClassTreeListInvalid extends Error {\n\tconstructor() {\n\t\tsuper(\n\t\t\t\"DemandedFactory constructor's argument 'classTreeList' is invalid. \" +\n\t\t\t\t\"Argument 'classTreeList' must be an array of DependencyTree instances\",\n\t\t);\n\t}\n}\n\n/** Class representing a DI objects factory for objects with demanded lifecycle\n * @class\n */\nclass DemandedFactory {\n\t/**\n\t *\n\t * @param {AbstractContextContainer} parent - parent container\n\t * @param {DependencyTree[]} [classTreeList=[]] - list of di objects dependency tree\n\t */\n\tconstructor(parent, classTreeList = []) {\n\t\tif (!(parent instanceof AbstractContextContainer)) {\n\t\t\tthrow new InvalidDemandedFactoryParent();\n\t\t}\n\t\tif (!Array.isArray(classTreeList) || (classTreeList.length && classTreeList.find((clsTree) => !(clsTree instanceof DependencyTree)))) {\n\t\t\tthrow new DemandedFactoryClassTreeListInvalid();\n\t\t}\n\t\tconst classWithInvalidLifecycle = classTreeList.find((cls) => cls.baseNode.lifecycle.id !== LifecycleEnum.Demanded);\n\t\tif (classWithInvalidLifecycle) {\n\t\t\tthrow new ContainerHasClassWithInvalidLifecycle(\"Demanded\", classWithInvalidLifecycle);\n\t\t}\n\t\tthis.classTreeList = classTreeList;\n\t\tthis.#parent = parent;\n\t}\n\n\t#parent;\n\n\t#buildInstance(clazzTree) {\n\t\tconst argumentValues = [];\n\t\tif (clazzTree.baseNode.constructor.args.length > 0) {\n\t\t\tclazzTree.baseNode.constructor.args.forEach((arg) => {\n\t\t\t\tconst argClazz = this.getParent().classTreeList.find((clsTree) => clsTree.baseNode.name === arg);\n\t\t\t\tconst existedInstance =\n\t\t\t\t\targClazz.baseNode.lifecycle.id !== LifecycleEnum.Demanded\n\t\t\t\t\t\t? this.getParent().getInstance(argClazz.baseNode.name, argClazz.baseNode.lifecycle.id, true)\n\t\t\t\t\t\t: undefined;\n\t\t\t\tif (existedInstance) {\n\t\t\t\t\treturn argumentValues.push(existedInstance);\n\t\t\t\t}\n\t\t\t\targumentValues.push(this.createInstance(argClazz.baseNode.key));\n\t\t\t});\n\t\t}\n\t\tclazzTree.baseNode.lifecycle.beforeCreate();\n\t\tconst instance = InstanceHelper.createInstance(clazzTree.baseNode, argumentValues);\n\t\tclazzTree.baseNode.lifecycle.afterCreate.bind(instance)();\n\t\treturn instance;\n\t}\n\n\t/** Adds new di object\n\t * @public\n\t * @param {DependencyTree} diObjectClazzTree\n\t */\n\taddDIObject(diObjectClazzTree) {\n\t\tif (diObjectClazzTree.baseNode.lifecycle.id !== LifecycleEnum.Demanded) {\n\t\t\tthrow new ContainerHasClassWithInvalidLifecycle(\"Demanded\", diObjectClazzTree);\n\t\t}\n\t\tthis.classTreeList.push(diObjectClazzTree);\n\t}\n\n\t/** Creates new instance of di object\n\t *\n\t * @param {DIObjectKey} key\n\t * @returns {Object|FunctionWrapper}\n\t */\n\tcreateInstance(key) {\n\t\t// create new instance and add it in Map\n\t\t// const clazz = this.classTreeList.find(cls => deepEqual(Symbol.keyFor(cls.baseNode.key.key), Symbol.keyFor(key.key)));\n\t\tconst clazz = this.classTreeList.find((cls) => cls.baseNode.key.key === key.key);\n\t\tif (!clazz) {\n\t\t\treturn undefined;\n\t\t}\n\t\treturn this.#buildInstance(clazz);\n\t}\n\n\t/** Returns context that's a parent container of this SessionContainer\n\t *\n\t * @returns {ContextContainer}\n\t */\n\tgetParent() {\n\t\treturn this.#parent;\n\t}\n}\n\nexport default DemandedFactory;\n","import AbstractContextContainer from \"./AbstractContextContainer.js\";\nimport DIObjectKeyFactory from \"./helpers/DIObjectKeyFactory.js\";\nimport SessionContainer from \"./SessionContainer.js\";\nimport SingletoneContainer from \"./SingletoneContainer.js\";\nimport DemandedFactory from \"./DemandedFactory.js\";\nimport LifecycleEnum from \"../constants/LifecycleEnum.js\";\n// eslint-disable-next-line no-unused-vars\nimport { DemandedConfig, DIObjectConfig, SessionConfig, SingletoneConfig } from \"../DIObjectConfig.js\";\n// eslint-disable-next-line no-unused-vars\nimport FunctionWrapper from \"../wrappers/FunctionWrapper.js\";\n\n/** Class for context - ContextContainer.\n * It takes config and generates dependency trees, validates it, creates scopes and allow to get instances\n * @class\n * @extends AbstractContextContainer\n */\nclass ContextContainer extends AbstractContextContainer {\n\t/**\n\t *\n\t * @param {DIObjectConfig[]} [config=[]]\n\t * @param {string} [name=\"\"]\n\t * @param {ContextContainer} [parent=null]\n\t * @param {DIObjectKeyFactory} [keyFactory=new DIObjectKeyFactory()]\n\t */\n\tconstructor(config = [], name = \"\", parent = null, keyFactory = new DIObjectKeyFactory()) {\n\t\tsuper(config, name, parent, keyFactory);\n\t\t// this.#parent = parent;\n\t\t// this.#keyFactory = keyFactory;\n\t}\n\n\t// #parent;\n\t// #keyFactory;\n\n\t/** Creates all needed scopes for this context by lifecycles.\n\t * @protected\n\t */\n\t_createScopes() {\n\t\t// sort scopes initialization order by desc of lifecycle id (order: Demanded -> Singletone -> Session -> Persistent)\n\t\tconst scopesTypes = new Set(this.classTreeList.map((cls) => cls.baseNode.lifecycle).sort((a, b) => b.id - a.id));\n\t\tscopesTypes.forEach((lifecycle) => {\n\t\t\tswitch (lifecycle.id) {\n\t\t\t\tcase LifecycleEnum.Session:\n\t\t\t\t\tthis.scopes.set(lifecycle.id, new SessionContainer(this, this.filterClassesByLifecycle(LifecycleEnum.Session)));\n\t\t\t\t\tbreak;\n\t\t\t\tcase LifecycleEnum.Singletone:\n\t\t\t\t\tthis.scopes.set(lifecycle.id, new SingletoneContainer(this, this.filterClassesByLifecycle(LifecycleEnum.Singletone)));\n\t\t\t\t\tbreak;\n\t\t\t\tcase LifecycleEnum.Demanded:\n\t\t\t\t\tthis.scopes.set(lifecycle.id, new DemandedFactory(this, this.filterClassesByLifecycle(LifecycleEnum.Demanded)));\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t});\n\t}\n\n\t/** Calls each scope init method if it exists.\n\t * @protected\n\t */\n\t_initScopes() {\n\t\tthis.scopes.forEach((scope) => {\n\t\t\tif (scope.init) {\n\t\t\t\tscope.init();\n\t\t\t}\n\t\t});\n\t}\n\n\t/** Add DI Object to this context\n\t * @public\n\t * @param {SingletoneConfig|SessionConfig|DemandedConfig} diObjectConfig - config of new di object\n\t * @returns {boolean}\n\t */\n\taddDIObject(diObjectConfig) {\n\t\tconst tree = super.addDIObject(diObjectConfig);\n\t\tif (!this.scopes.has(tree.baseNode.lifecycle.id)) {\n\t\t\tswitch (tree.baseNode.lifecycle.id) {\n\t\t\t\tcase LifecycleEnum.Session:\n\t\t\t\t\tthis.scopes.set(tree.baseNode.lifecycle.id, new SessionContainer(this, [tree]));\n\t\t\t\t\tbreak;\n\t\t\t\tcase LifecycleEnum.Singletone:\n\t\t\t\t\tthis.scopes.set(tree.baseNode.lifecycle.id, new SingletoneContainer(this, [tree]));\n\t\t\t\t\tbreak;\n\t\t\t\tcase LifecycleEnum.Demanded:\n\t\t\t\t\tthis.scopes.set(tree.baseNode.lifecycle.id, new DemandedFactory(this, [tree]));\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t} else {\n\t\t\tconst scope = this.scopes.get(tree.baseNode.lifecycle.id);\n\t\t\tscope.addDIObject(tree);\n\t\t}\n\t\treturn true;\n\t}\n\n\t/** Returns `true` if context has di object with specified name.\n\t * @public\n\t * @param {string|symbol|Function} name - name of di object from this context\n\t * @returns {boolean}\n\t */\n\thasDIObject(name) {\n\t\tconst classTree = this._findClassTree(name);\n\t\treturn classTree !== undefined;\n\t}\n\n\t/** Returns `true` if context has an instance of di object with specified name.\n\t * @public\n\t * @param {string|symbol|Function} name - name of di object from this context\n\t * @returns {boolean}\n\t */\n\thasInstance(name) {\n\t\tconst classTree = this._findClassTree(name);\n\t\tif (classTree === undefined) return false;\n\t\tconst scope = this.getScope(classTree.baseNode.lifecycle.id);\n\t\tif (classTree.baseNode.lifecycle.id === LifecycleEnum.Demanded) return false;\n\t\treturn scope.hasInstance(classTree.baseNode.key);\n\t}\n\n\t/**\n\t * @template T\n\t * @typedef {T extends abstract new (...args: any[]) => infer P ? P : T extends Function ? FunctionWrapper<T> : any} GetInstanceReturnType<T>\n\t */\n\n\t/** Get an instance of di object with specified name and lifecycleId.\n\t * @public\n\t * @template {string | symbol | Function} T\n\t * @param {T} name - name of di object from this context\n\t * @param {number} [lifecycleId] - id of Lifecycle\n\t * @param {boolean} [calledFromScope] - true only if this method is called from scope\n\t * @returns {GetInstanceReturnType<T>}\n\t */\n\tgetInstance(name, lifecycleId, calledFromScope) {\n\t\tconst clazz = this._findClassTree(name, lifecycleId);\n\t\tif (clazz === undefined) {\n\t\t\tif (calledFromScope) return undefined;\n\t\t\treturn this._getChildInstance(name, lifecycleId);\n\t\t}\n\t\tconst key = clazz.baseNode.key;\n\t\tconst scope = this.getScope(clazz.baseNode.lifecycle.id);\n\t\tif (!scope) {\n\t\t\tif (calledFromScope) return undefined;\n\t\t\treturn this._getChildInstance(name, lifecycleId);\n\t\t}\n\t\tif (scope instanceof DemandedFactory) return scope.createInstance(key);\n\t\treturn calledFromScope ? scope.getInstance(key) : scope.getInstance(key) ?? this._getChildInstance(name, lifecycleId);\n\t}\n\n\t/** Returns `true` if type of di object with specified key is the same as 'type' argument.\n\t * @public\n\t * @param {string|symbol} key - 'key' of di object\n\t * @param {any} type - type of di object\n\t * @returns {boolean}\n\t */\n\ttypeMatch(name, type) {\n\t\t// is DI object with name instance of type\n\t\tconst clazz = this._findClassTree(name);\n\t\tif (clazz === undefined) {\n\t\t\tthrow new Error(\"There is no di object with this name.\");\n\t\t}\n\t\treturn clazz.baseNode.type === type;\n\t}\n\n\t/** Get scope by lifecycle id.\n\t * @public\n\t * @param {number} lifecycleId - id of Lifecycle\n\t * @returns {SingletoneContainer|SessionContainer|DemandedFactory}\n\t */\n\t// eslint-disable-next-line no-unused-vars\n\tgetScope(lifecycleId) {\n\t\tif (typeof lifecycleId !== \"number\" || !Object.values(LifecycleEnum).find((v) => v === lifecycleId)) {\n\t\t\treturn null;\n\t\t}\n\t\treturn this.scopes.get(lifecycleId);\n\t}\n}\n\nexport default ContextContainer;\n","class InvalidAbstractContextParent extends Error {\n\tconstructor() {\n\t\tsuper(\"Invalid context parent. Parent must be an instance of AbstractContextContainer or it's derived class, null or undefined.\");\n\t}\n}\n\nexport default InvalidAbstractContextParent;\n","class InvalidDIObjectKeyFactory extends Error {\n\tconstructor() {\n\t\tsuper(\"Invalid context keyFactory. KeyFactory must be an instance of DIObjectKeyFactory or it's derived class\");\n\t}\n}\n\nexport default InvalidDIObjectKeyFactory;\n","import AbstractContextContainer from \"./AbstractContextContainer.js\";\nimport { DIObjectConfig } from \"../DIObjectConfig.js\";\nimport DIObjectKeyFactory from \"./helpers/DIObjectKeyFactory.js\";\nimport InvalidAbstractContextConfig from \"../errors/InvalidAbstractContextConfig.js\";\nimport InvalidAbstractContextParent from \"../errors/InvalidAbstractContextParent.js\";\nimport InvalidDIObjectKeyFactory from \"../errors/InvalidDIObjectKeyFactory.js\";\n\n/** Abstract Class for creation of AbstractContextContainer - AbstractContextContainerFactory.\n *\n * @class\n */\nclass AbstractContextContainerFactory {\n\t/** Returns new AbstractContextContainer.\n\t * @param {DIObjectConfig[]} [config=[]] - list of di objects configs\n\t * @param {string} [name=\"\"] - name of context\n\t * @param {AbstractContextContainer} [parent=null] - parent context\n\t * @param {DIObjectKeyFactory} [keyFactory=new DIObjectKeyFactory()] - Keys Factory\n\t * @returns {AbstractContextContainer}\n\t */\n\tcreateContainer(config = [], name = \"\", parent = null, keyFactory = new DIObjectKeyFactory()) {\n\t\tif (AbstractContextContainerFactory.validateContainerParams(config, name, parent, keyFactory)) {\n\t\t\tconst context = new AbstractContextContainer(config, name, parent, keyFactory);\n\t\t\tcontext.setParent(parent);\n\t\t\treturn context;\n\t\t}\n\t}\n\n\t/** Validates container params\n\t * @static\n\t * @param {DIObjectConfig[]} [config=[]] - list of di objects configs\n\t * @param {string} [name=\"\"] - name of context\n\t * @param {AbstractContextContainer} [parent=null] - parent context\n\t * @param {DIObjectKeyFactory} [keyFactory=new DIObjectKeyFactory()] - Keys Factory\n\t * @returns {boolean}\n\t */\n\tstatic validateContainerParams(config, name, parent, keyFactory) {\n\t\tif (!Array.isArray(config) || config.find((c) => !(c instanceof DIObjectConfig))) {\n\t\t\tthrow new InvalidAbstractContextConfig();\n\t\t}\n\t\tif (parent !== null && parent !== undefined && !(parent instanceof AbstractContextContainer)) {\n\t\t\tthrow new InvalidAbstractContextParent();\n\t\t}\n\t\tif (!name) {\n\t\t\tthrow new Error(\"Name of Context must be a non empty string.\");\n\t\t}\n\t\tif (!(keyFactory instanceof DIObjectKeyFactory)) {\n\t\t\tthrow new InvalidDIObjectKeyFactory();\n\t\t}\n\t\treturn true;\n\t}\n}\n\nexport default AbstractContextContainerFactory;\n","const generateRandomString = (length) => {\n\tlet str = \"\";\n\tconst chars = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789\";\n\tfor (let i = 0; i < length; i++) {\n\t\tstr += chars.charAt(Math.floor(Math.random() * length));\n\t}\n\treturn str;\n};\n\nexport default generateRandomString;\n","class InvalidContextContainerNameType extends Error {\n\tconstructor() {\n\t\tsuper(`Invalid context name type. Type of context name must be a string.`);\n\t}\n}\n\nexport default InvalidContextContainerNameType;\n","class NotUniqueContextContainerName extends Error {\n\tconstructor(name) {\n\t\tsuper(`Context name '${name}' is not unique. Context name must be unique string.`);\n\t}\n}\n\nexport default NotUniqueContextContainerName;\n","import ContextContainer from \"./ContextContainer.js\"; // need to be before import of AbstractContextContainerFactory (why so?)\nimport AbstractContextContainerFactory from \"./AbstractContextContainerFactory.js\";\nimport generateRandomString from \"../utils/generateRandomString.js\";\nimport InvalidContextContainerNameType from \"../errors/InvalidContextContainerNameType.js\";\nimport NotUniqueContextContainerName from \"../errors/NotUniqueContextContainerName.js\";\nimport DIObjectKeyFactory from \"./helpers/DIObjectKeyFactory.js\";\n// eslint-disable-next-line no-unused-vars\nimport { DIObjectConfig } from \"../DIObjectConfig.js\";\n// import { parseType } from \"../../ReflectionJs/index.js\";\n\n/**\n * @template T\n * @typedef {T extends abstract new (...args: any[]) => infer P ? P : T extends Function ? FunctionWrapper<T> : any} GetInstanceReturnType<T>\n */\n\n/**\n * @template {Function} T\n * @param {T} diObjectType\n * @param {ContextContainer} ctx\n * @returns {GetInstanceReturnType<T>}\n */\nexport function createDIObjectClassConstructor(diObjectType, ctx) {\n\treturn function DIObject() {\n\t\tif (new.target) {\n\t\t\treturn ctx.getInstance(diObjectType);\n\t\t}\n\t\treturn new DIObject();\n\t};\n}\n\n/**\n * @template {Function} T\n * @param {T} diObjectType\n * @param {ContextContainer} ctx\n * @returns {GetInstanceReturnType<T>}\n */\nexport function createDIObjectFunctionConstructor(diObjectType, ctx) {\n\treturn () => ctx.getInstance(diObjectType).call;\n}\n\n/** Class for creation of ContextContainer - ContextContainerFactory.\n *\n * @class\n * @extends AbstractContextContainerFactory\n */\nclass ContextContainerFactory extends AbstractContextContainerFactory {\n\tstatic #names = new Set();\n\tstatic #addName(name) {\n\t\tif (typeof name !== \"string\") {\n\t\t\tthrow new InvalidContextContainerNameType();\n\t\t}\n\t\tif (ContextContainerFactory.#names.has(name)) {\n\t\t\tthrow new NotUniqueContextContainerName(name);\n\t\t}\n\t\tContextContainerFactory.#names.add(name);\n\t}\n\n\t/** Returns new ContextContainer.\n\t * @static\n\t * @param {DIObjectConfig[]} [config=[]] - list of di objects configs\n\t * @param {string} [name=\"\"] - name of context\n\t * @param {ContextContainer} [parent=null] - parent context\n\t * @param {DIObjectKeyFactory} [keyFactory=new DIObjectKeyFactory()] - Keys Factory\n\t * @returns {ContextContainer}\n\t */\n\tstatic createContainer(config = [], name = \"\", parent = null, keyFactory = new DIObjectKeyFactory()) {\n\t\tif (name === \"\") {\n\t\t\tname = generateRandomString(7);\n\t\t}\n\t\tif (super.validateContainerParams(config, name, parent, keyFactory)) {\n\t\t\tconst context = new ContextContainer(config, name, parent, keyFactory);\n\t\t\tcontext.setParent(parent);\n\t\t\tContextContainerFactory.#addName(name);\n\t\t\treturn context;\n\t\t}\n\t\treturn null;\n\t}\n}\n\nexport default ContextContainerFactory;\n","import DIClazzModule from \"./DIClazz.js\";\nimport {\n\tDIObjectConfig as DIObjectConfigModule,\n\tDemandedConfig as DemandedConfigModule,\n\tSessionConfig as SessionConfigModule,\n\tSingletoneConfig as SingletoneConfigModule,\n} from \"./DIObjectConfig.js\";\nimport DIObjectKeyModule from \"./containers/helpers/DIObjectKey.js\";\nimport ContextContainerModule from \"./containers/ContextContainer.js\";\nimport AbstractContextContainerModule from \"./containers/AbstractContextContainer.js\";\nimport DemandedFactoryModule from \"./containers/DemandedFactory.js\";\nimport SessionContainerModule from \"./containers/SessionContainer.js\";\nimport SimpleContainerModule from \"./containers/SimpleContainer.js\";\nimport SingletoneContainerModule from \"./containers/SingletoneContainer.js\";\nimport DemandedLifecycleModule from \"./lifecycle/DemandedLifecycle.js\";\nimport LifecycleModule from \"./lifecycle/Lifecycle.js\";\nimport SessionLifecycleModule from \"./lifecycle/SessionLifecycle.js\";\nimport SingletoneLifecycleModule from \"./lifecycle/SingletoneLifecycle.js\";\nimport ContextContainerFactoryModule from \"./containers/ContextContainerFactory.js\";\nimport AbstractContextContainerFactoryModule from \"./containers/AbstractContextContainerFactory.js\";\n\n// const names = {\n//     windowName: Symbol.for('window'),\n//     sideBarName: Symbol.for('sideBar'),\n//     buttonName: 'button',\n//     rectangleName: 'rectangle',\n// };\n\n// const DIConfig = [\n//     // new DemandedConfig(\n//     //     'abstractWindow',\n//     //     AbstractWindow\n//     // ),\n//     new DemandedConfigModule(\n//         names.windowName,\n//         Window,\n//         function () {\n//             console.log(10);\n//         },\n//         function () {\n//             console.log(this.sideBar.button.width);\n//         }\n//     ),\n//     new SingletoneConfigModule(names.sideBarName, SideBar),\n//     new SessionConfigModule(names.buttonName, Button),\n// ];\n\n// const DISecondConfig = [\n//     new SessionConfigModule('dot', dot),\n//     new SessionConfigModule(names.rectangleName, rectangle),\n// ];\n\n// const appContext = new ContextContainerModule(DIConfig, 'app context');\n// const appSecondContext = new ContextContainerModule(DISecondConfig, 'app second context', appContext);\n\n// appContext.init();\n// appSecondContext.init();\n// appContext.getInstance(names.windowName);\n// console.log(appContext.getInstance(names.rectangleName));\n// console.log(appContext.getChildren());\n// const w = appContext.getInstance(Window);\n// console.log(appContext.typeMatch(names.windowName, Window));\n// const aw = appContext.getInstance(AbstractWindow);\n\n// const DIConfig = [\n//     new DIObjectConfig('animal', Animal, LifecycleEnum.Demanded),\n//     new DIObjectConfig('woman', Woman),\n//     new DIObjectConfig('man', Man),\n//     new DIObjectConfig('simple', Simple, LifecycleEnum.Singletone),\n//     new DIObjectConfig('dot', dot),\n//     new DIObjectConfig('line', line),\n//     new DIObjectConfig('square', square),\n//     new DIObjectConfig('rectangle', rectangle),\n// ];\n\n// const appContext = new ContextContainer(DIConfig, 'App Context');\n// appContext.init();\n\n// const simpleObj = appContext.getInstance(Simple);\n// const manObg = appContext.getInstance(Man);\n\n// appContext.getInstance(Simple);\n\n// console.log('This is Simple singletone from AppContext ', simpleObj);\n// console.log('This is Man session from AppContext ', manObg);\n\n// const testPromise = new Promise((resolve, reject) => {\n//     setTimeout(() => resolve(5), 1000);\n// });\n\n// testPromise.then((res) => {\n//     console.log(res);\n//     return res + 5;\n// });\n\n// testPromise.then((res) => {\n//     console.log(res);\n//     return res + 10;\n// })\n\n/** @module Dizy */\n\n/** Dizy type definition\n * @typedef {Object} Dizy\n * @property {ContextContainerModule} ContextContainer: ContextContainerModule,\n * @property {AbstractContextContainerModule} AbstractContextContainer: AbstractContextContainerModule,\n * @property {DemandedFactoryModule} DemandedFactory: DemandedFactoryModule,\n * @property {SimpleContainerModule} SimpleContainer: SimpleContainerModule,\n * @property {SessionContainerModule} SessionContainer: SessionContainerModule,\n * @property {SingletoneContainerModule} SingletoneContainer: SingletoneContainerModule,\n * @property {DIObjectKeyModule} DIObjectKey: DIObjectKeyModule,\n * @property {DemandedConfigModule} DemandedConfig: DemandedConfigModule,\n * @property {SessionConfigModule} SessionConfig: SessionConfigModule,\n * @property {SingletoneConfigModule} SingletoneConfig: SingletoneConfigModule,\n * @property {DIObjectConfigModule} DIObjectConfig: DIObjectConfigModule,\n * @property {DIClazzModule} DIClazz: DIClazzModule,\n * @property {DemandedLifecycleModule} DemandedLifecycle: DemandedLifecycleModule,\n * @property {SingletoneLifecycleModule} SingletoneLifecycle: SingletoneLifecycleModule,\n * @property {SessionLifecycleModule} SessionLifecycle: SessionLifecycleModule,\n * @property {LifecycleModule} Lifecycle: LifecycleModule,\n * @property {ContextContainerFactoryModule} ContextContainerFactory: ContextContainerFactoryModule,\n * @property {AbstractContextContainerFactoryModule} AbstractContextContainerFactory: AbstractContextContainerFactoryModule,\n */\nconst Dizy = {\n\tContextContainer: ContextContainerModule,\n\tAbstractContextContainer: AbstractContextContainerModule,\n\tDemandedFactory: DemandedFactoryModule,\n\tSimpleContainer: SimpleContainerModule,\n\tSessionContainer: SessionContainerModule,\n\tSingletoneContainer: SingletoneContainerModule,\n\tDIObjectKey: DIObjectKeyModule,\n\tDemandedConfig: DemandedConfigModule,\n\tSessionConfig: SessionConfigModule,\n\tSingletoneConfig: SingletoneConfigModule,\n\tDIObjectConfig: DIObjectConfigModule,\n\tDIClazz: DIClazzModule,\n\tDemandedLifecycle: DemandedLifecycleModule,\n\tSingletoneLifecycle: SingletoneLifecycleModule,\n\tSessionLifecycle: SessionLifecycleModule,\n\tLifecycle: LifecycleModule,\n\tContextContainerFactory: ContextContainerFactoryModule,\n\tAbstractContextContainerFactory: AbstractContextContainerFactoryModule,\n};\n\nmodule.exports.ContextContainer = Dizy.ContextContainer;\nmodule.exports.AbstractContextContainer = Dizy.AbstractContextContainer;\nmodule.exports.ContextContainerFactory = Dizy.ContextContainerFactory;\nmodule.exports.AbstractContextContainerFactory = Dizy.AbstractContextContainerFactory;\nmodule.exports.DemandedConfig = Dizy.DemandedConfig;\nmodule.exports.SessionConfig = Dizy.SessionConfig;\nmodule.exports.SingletoneConfig = Dizy.SingletoneConfig;\nmodule.exports.DIObjectConfig = Dizy.DIObjectConfig;\nmodule.exports.DIClazz = Dizy.DIClazz;\nmodule.exports.DIObjectKey = Dizy.DIObjectKey;\nmodule.exports.SingletoneContainer = Dizy.SingletoneContainer;\nmodule.exports.SimpleContainer = Dizy.SimpleContainer;\nmodule.exports.DemandedFactory = Dizy.DemandedFactory;\nmodule.exports.SessionContainer = Dizy.SessionContainer;\nmodule.exports.DemandedLifecycle = Dizy.DemandedLifecycle;\nmodule.exports.SingletoneLifecycle = Dizy.SingletoneLifecycle;\nmodule.exports.SessionLifecycle = Dizy.SessionLifecycle;\nmodule.exports.Lifecycle = Dizy.Lifecycle;\n\nmodule.exports = Dizy;\n"],"names":["root","factory","exports","module","define","amd","global","argDefaultValue","getBaseClassConstructor","classConstructorArgsNames","functionArgsNames","getType","getStringifiedEntityName","parseType","ArgumentInvalidType","Error","constructor","argType","super","ArgumentIsEmptyString","argStr","parts","split","name","trim","value","length","undefined","ClassInvalidType","cls","clsType","prototype","__proto__","findCloseBraceIndex","splitArgsStrByCommas","HasNoConstructorError","ClsArgumentInvalidType","clsStr","toString","startIndex","indexOf","openBraceStartIndex","closeBraceStartIndex","argsStr","slice","startPosition","args","map","arg","filter","FuncArgumentInvalidType","funcType","str","openBraceIndex","closeBraceIndex","getOpenBracesCount","end","s","index","char","openBraceBeforeCloseCount","i","findArgsSeparatorCommas","allCommas","prevCommaIndex","comma","openBracesCount","closeBracesCount","openCurlyBracesCount","closeCurlyBracesCount","c","separators","commaIndex","func","funcStr","equalIndex","EntityStrInvalidType","entityStr","entityStrType","EntityStrIsEmpty","includes","endIndex","data","type","typeStr","startsWith","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","__webpack_modules__","r","Symbol","toStringTag","Object","defineProperty","NotImplementedException","this","message","id","beforeCreate","afterCreate","key","isClass","lifecycle","Persistent","Session","Singletone","Demanded","InvalidDIObjectName","UnregisteredDIObjectLifecycle","InvalidDIObjectLifecycle","InvalidDIObjectType","DIObjectConfig","InvalidKey","test","parseKey","keyFields","parent","Number","Boolean","DependencyLoopError","first","second","InvalidAbstractContextConfig","InvalidDIObjectArgDefaultValue","argName","defaultValue","InvalidDIObjectArgumentName","NotAllowedDIObjectType","hasInstance","getInstance","getParent","typeMatch","DependencyTreeNode","baseClazz","height","deps","Array","isArray","find","d","BaseNodeInvalid","baseNode","node","forEach","dep","push","getDepsByHeight","groupByHeight","currentHeight","groups","currentDeps","InvalidDIParent","DIContainerClassTreeListInvalid","AbstractDIContainer","classTreeList","clsTree","NotUniqueDIObjectKey","keys","Map","createKey","keyDescription","keyDescriptionStr","has","set","values","v","InvalidBaseClazz","InvalidAllClasses","DependencyTreeFactory","createDependencyTree","allClasses","findIndex","argClazz","nextNode","DerivedClassConstructorArgsError","derivedClassName","baseClassName","InvalidContextChild","AbstractContextContainer","config","keyFactory","scopes","init","sort","a","b","_createScopes","_initScopes","child","bind","containerObject","objName","keyFor","typeOfContainerObject","constructorArgs","obj","addDIObject","diObjectConfig","diObjectClazz","tree","clazz","lifecycleId","_findClassTree","findCallback","setParent","getChildren","addChild","_removeParent","_getChildInstance","instance","context","childContext","deleteChild","childName","get","delete","getScope","filterClassesByLifecycle","argsSet","Set","add","place","elem","baseClass","isAnotherDIObject","objConfig","clsConstructorArgs","baseClsConstructorArgs","depsList","ContainerHasClassWithInvalidLifecycle","containerScope","call","createInstance","clazzTreeNode","argumentValues","InvalidSimpleContainerParent","_buildInstance","clazzTree","existedInstance","_addInstance","diObjectClazzTree","deepEqual","x","y","prop","hasOwnProperty","InstancesMap","symbolKey","elemKey","k","isExist","classWithInvalidLifecycle","existed","InvalidDemandedFactoryParent","DemandedFactoryClassTreeListInvalid","scope","hasDIObject","classTree","calledFromScope","InvalidAbstractContextParent","InvalidDIObjectKeyFactory","AbstractContextContainerFactory","createContainer","validateContainerParams","charAt","Math","floor","random","InvalidContextContainerNameType","NotUniqueContextContainerName","ContextContainerFactory","static","Dizy","ContextContainer","DemandedFactory","SimpleContainer","SessionContainer","SingletoneContainer","DIObjectKey","DemandedConfig","SessionConfig","SingletoneConfig","DIClazz","DemandedLifecycle","SingletoneLifecycle","SessionLifecycle","Lifecycle"],"sourceRoot":""}